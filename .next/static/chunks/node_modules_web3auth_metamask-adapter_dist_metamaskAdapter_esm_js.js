"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["node_modules_web3auth_metamask-adapter_dist_metamaskAdapter_esm_js"],{

/***/ "./node_modules/@web3auth/metamask-adapter/dist/metamaskAdapter.esm.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@web3auth/metamask-adapter/dist/metamaskAdapter.esm.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MetamaskAdapter: function() { return /* binding */ MetamaskAdapter; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/get */ \"./node_modules/@babel/runtime/helpers/esm/get.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/esm/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _metamask_detect_provider__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @metamask/detect-provider */ \"./node_modules/@metamask/detect-provider/dist/index.js\");\n/* harmony import */ var _metamask_detect_provider__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_metamask_detect_provider__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _web3auth_base__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @web3auth/base */ \"./node_modules/@web3auth/metamask-adapter/node_modules/@web3auth/base/dist/base.esm.js\");\n/* harmony import */ var _web3auth_base_evm_adapter__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @web3auth/base-evm-adapter */ \"./node_modules/@web3auth/metamask-adapter/node_modules/@web3auth/base-evm-adapter/dist/baseEvmAdapter.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar MetamaskAdapter = /*#__PURE__*/function (_BaseEvmAdapter) {\n  (0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(MetamaskAdapter, _BaseEvmAdapter);\n\n  var _super = _createSuper(MetamaskAdapter);\n\n  function MetamaskAdapter(adapterOptions) {\n    var _this;\n\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this, MetamaskAdapter);\n\n    _this = _super.call(this, adapterOptions);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this), \"adapterNamespace\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_NAMESPACES.EIP155);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this), \"currentChainNamespace\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.CHAIN_NAMESPACES.EIP155);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this), \"type\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_CATEGORY.EXTERNAL);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this), \"name\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.WALLET_ADAPTERS.METAMASK);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this), \"status\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_STATUS.NOT_READY);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this), \"rehydrated\", false);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this), \"metamaskProvider\", null);\n\n    _this.chainConfig = (adapterOptions === null || adapterOptions === void 0 ? void 0 : adapterOptions.chainConfig) || null;\n    _this.sessionTime = (adapterOptions === null || adapterOptions === void 0 ? void 0 : adapterOptions.sessionTime) || 86400;\n    return _this;\n  }\n\n  (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(MetamaskAdapter, [{\n    key: \"provider\",\n    get: function get() {\n      if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_STATUS.CONNECTED && this.metamaskProvider) {\n        return this.metamaskProvider;\n      }\n\n      return null;\n    },\n    set: function set(_) {\n      throw new Error(\"Not implemented\");\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().mark(function _callee(options) {\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_4__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(MetamaskAdapter.prototype), \"checkInitializationRequirements\", this).call(this);\n\n                _context.next = 3;\n                return _metamask_detect_provider__WEBPACK_IMPORTED_MODULE_10___default()({\n                  mustBeMetaMask: true\n                });\n\n              case 3:\n                this.metamaskProvider = _context.sent;\n\n                if (this.metamaskProvider) {\n                  _context.next = 6;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.WalletInitializationError.notInstalled(\"Metamask extension is not installed\");\n\n              case 6:\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_STATUS.READY;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_EVENTS.READY, _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.WALLET_ADAPTERS.METAMASK);\n                _context.prev = 8;\n                _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.log.debug(\"initializing metamask adapter\");\n\n                if (!options.autoConnect) {\n                  _context.next = 14;\n                  break;\n                }\n\n                this.rehydrated = true;\n                _context.next = 14;\n                return this.connect();\n\n              case 14:\n                _context.next = 19;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](8);\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_EVENTS.ERRORED, _context.t0);\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 16]]);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"setAdapterSettings\",\n    value: function setAdapterSettings(options) {\n      if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_STATUS.READY) return;\n\n      if (options !== null && options !== void 0 && options.sessionTime) {\n        this.sessionTime = options.sessionTime;\n      }\n\n      if (options !== null && options !== void 0 && options.clientId) {\n        this.clientId = options.clientId;\n      }\n    }\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().mark(function _callee2() {\n        var _this2 = this;\n\n        var chainId;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_4__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(MetamaskAdapter.prototype), \"checkConnectionRequirements\", this).call(this); // set default to mainnet\n\n\n                if (!this.chainConfig) this.chainConfig = (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_11__.getChainConfig)(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__.CHAIN_NAMESPACES.EIP155, 1);\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_STATUS.CONNECTING;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_EVENTS.CONNECTING, {\n                  adapter: _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.WALLET_ADAPTERS.METAMASK\n                });\n\n                if (this.metamaskProvider) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.WalletLoginError.notConnectedError(\"Not able to connect with metamask\");\n\n              case 6:\n                _context2.prev = 6;\n                _context2.next = 9;\n                return this.metamaskProvider.request({\n                  method: \"eth_requestAccounts\"\n                });\n\n              case 9:\n                chainId = this.metamaskProvider.chainId;\n\n                if (!(chainId !== this.chainConfig.chainId)) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                _context2.next = 13;\n                return this.switchChain(this.chainConfig);\n\n              case 13:\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_STATUS.CONNECTED;\n\n                if (this.provider) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.WalletLoginError.notConnectedError(\"Failed to connect with provider\");\n\n              case 16:\n                this.provider.once(\"disconnect\", function () {\n                  // ready to be connected again\n                  _this2.disconnect();\n                });\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_EVENTS.CONNECTED, {\n                  adapter: _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.WALLET_ADAPTERS.METAMASK,\n                  reconnected: this.rehydrated\n                });\n                return _context2.abrupt(\"return\", this.provider);\n\n              case 21:\n                _context2.prev = 21;\n                _context2.t0 = _context2[\"catch\"](6);\n                // ready again to be connected\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_STATUS.READY;\n                this.rehydrated = false;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_EVENTS.ERRORED, _context2.t0);\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.WalletLoginError.connectionError(\"Failed to login with metamask wallet\");\n\n              case 27:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[6, 21]]);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().mark(function _callee3() {\n        var _this$provider;\n\n        var options,\n            _args3 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                options = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {\n                  cleanup: false\n                };\n                _context3.next = 3;\n                return (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_4__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(MetamaskAdapter.prototype), \"disconnect\", this).call(this);\n\n              case 3:\n                (_this$provider = this.provider) === null || _this$provider === void 0 ? void 0 : _this$provider.removeAllListeners();\n\n                if (options.cleanup) {\n                  this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_STATUS.NOT_READY;\n                  this.metamaskProvider = null;\n                } else {\n                  // ready to be connected again\n                  this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_STATUS.READY;\n                }\n\n                this.rehydrated = false;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_EVENTS.DISCONNECTED);\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }, {\n    key: \"getUserInfo\",\n    value: function () {\n      var _getUserInfo = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().mark(function _callee4() {\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.ADAPTER_STATUS.CONNECTED)) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n\n              case 2:\n                return _context4.abrupt(\"return\", {});\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getUserInfo() {\n        return _getUserInfo.apply(this, arguments);\n      }\n\n      return getUserInfo;\n    }()\n  }, {\n    key: \"switchChain\",\n    value: function () {\n      var _switchChain = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().mark(function _callee5(chainConfig) {\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (this.metamaskProvider) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__.WalletLoginError.notConnectedError(\"Not connected with wallet\");\n\n              case 2:\n                _context5.prev = 2;\n                _context5.next = 5;\n                return this.metamaskProvider.request({\n                  method: \"wallet_switchEthereumChain\",\n                  params: [{\n                    chainId: chainConfig.chainId\n                  }]\n                });\n\n              case 5:\n                _context5.next = 15;\n                break;\n\n              case 7:\n                _context5.prev = 7;\n                _context5.t0 = _context5[\"catch\"](2);\n\n                if (!(_context5.t0.code === 4902)) {\n                  _context5.next = 14;\n                  break;\n                }\n\n                _context5.next = 12;\n                return this.metamaskProvider.request({\n                  method: \"wallet_addEthereumChain\",\n                  params: [{\n                    chainId: chainConfig.chainId,\n                    chainName: chainConfig.displayName,\n                    rpcUrls: [chainConfig.rpcTarget]\n                  }]\n                });\n\n              case 12:\n                _context5.next = 15;\n                break;\n\n              case 14:\n                throw _context5.t0;\n\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[2, 7]]);\n      }));\n\n      function switchChain(_x2) {\n        return _switchChain.apply(this, arguments);\n      }\n\n      return switchChain;\n    }()\n  }]);\n\n  return MetamaskAdapter;\n}(_web3auth_base_evm_adapter__WEBPACK_IMPORTED_MODULE_12__.BaseEvmAdapter);\n\n\n//# sourceMappingURL=metamaskAdapter.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHdlYjNhdXRoL21ldGFtYXNrLWFkYXB0ZXIvZGlzdC9tZXRhbWFza0FkYXB0ZXIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0U7QUFDSjtBQUNOO0FBQ29CO0FBQ3BDO0FBQ1U7QUFDa0M7QUFDdEI7QUFDQTtBQUNQO0FBQ0U7QUFDNEk7QUFDL0k7O0FBRTVELGlDQUFpQyw2REFBNkQseUNBQXlDLFlBQVksaUZBQWUsbUJBQW1CLGlDQUFpQyxnQkFBZ0IsaUZBQWUsb0JBQW9CLDJEQUEyRCxPQUFPLHlDQUF5QyxPQUFPLDRGQUEwQjs7QUFFclosdUNBQXVDLHdFQUF3RSwwQ0FBMEMsOENBQThDLE1BQU0sNEVBQTRFLElBQUksZUFBZSxZQUFZOztBQUV4VDtBQUNBLEVBQUUsMkVBQVM7O0FBRVg7O0FBRUE7QUFDQTs7QUFFQSxJQUFJLGlGQUFlOztBQUVuQjs7QUFFQSxJQUFJLGlGQUFlLENBQUMsd0ZBQXNCLDZCQUE2QiwrREFBa0I7O0FBRXpGLElBQUksaUZBQWUsQ0FBQyx3RkFBc0Isa0NBQWtDLDZEQUFnQjs7QUFFNUYsSUFBSSxpRkFBZSxDQUFDLHdGQUFzQixpQkFBaUIsNkRBQWdCOztBQUUzRSxJQUFJLGlGQUFlLENBQUMsd0ZBQXNCLGlCQUFpQiw0REFBZTs7QUFFMUUsSUFBSSxpRkFBZSxDQUFDLHdGQUFzQixtQkFBbUIsMkRBQWM7O0FBRTNFLElBQUksaUZBQWUsQ0FBQyx3RkFBc0I7O0FBRTFDLElBQUksaUZBQWUsQ0FBQyx3RkFBc0I7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUUsOEVBQVk7QUFDZDtBQUNBO0FBQ0EsMEJBQTBCLDJEQUFjO0FBQ3hDO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxrQkFBa0IsbUZBQWlCLGVBQWUsc0VBQXdCO0FBQzFFLGVBQWUsc0VBQXdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBOztBQUVBLHNCQUFzQiw2REFBZ0I7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBLENBQUMsQ0FBQyx1RUFBYzs7QUFFVztBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHdlYjNhdXRoL21ldGFtYXNrLWFkYXB0ZXIvZGlzdC9tZXRhbWFza0FkYXB0ZXIuZXNtLmpzP2FjNzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvcic7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJztcbmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkJztcbmltcG9ydCBfZ2V0IGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZ2V0JztcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0cyc7XG5pbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJztcbmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZic7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHknO1xuaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAnQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3InO1xuaW1wb3J0IGRldGVjdEV0aGVyZXVtUHJvdmlkZXIgZnJvbSAnQG1ldGFtYXNrL2RldGVjdC1wcm92aWRlcic7XG5pbXBvcnQgeyBBREFQVEVSX05BTUVTUEFDRVMsIENIQUlOX05BTUVTUEFDRVMsIEFEQVBURVJfQ0FURUdPUlksIFdBTExFVF9BREFQVEVSUywgQURBUFRFUl9TVEFUVVMsIEFEQVBURVJfRVZFTlRTLCBsb2csIFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IsIFdhbGxldExvZ2luRXJyb3IsIGdldENoYWluQ29uZmlnIH0gZnJvbSAnQHdlYjNhdXRoL2Jhc2UnO1xuaW1wb3J0IHsgQmFzZUV2bUFkYXB0ZXIgfSBmcm9tICdAd2ViM2F1dGgvYmFzZS1ldm0tYWRhcHRlcic7XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxuXG52YXIgTWV0YW1hc2tBZGFwdGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQmFzZUV2bUFkYXB0ZXIpIHtcbiAgX2luaGVyaXRzKE1ldGFtYXNrQWRhcHRlciwgX0Jhc2VFdm1BZGFwdGVyKTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKE1ldGFtYXNrQWRhcHRlcik7XG5cbiAgZnVuY3Rpb24gTWV0YW1hc2tBZGFwdGVyKGFkYXB0ZXJPcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1ldGFtYXNrQWRhcHRlcik7XG5cbiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGFkYXB0ZXJPcHRpb25zKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJhZGFwdGVyTmFtZXNwYWNlXCIsIEFEQVBURVJfTkFNRVNQQUNFUy5FSVAxNTUpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImN1cnJlbnRDaGFpbk5hbWVzcGFjZVwiLCBDSEFJTl9OQU1FU1BBQ0VTLkVJUDE1NSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwidHlwZVwiLCBBREFQVEVSX0NBVEVHT1JZLkVYVEVSTkFMKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJuYW1lXCIsIFdBTExFVF9BREFQVEVSUy5NRVRBTUFTSyk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic3RhdHVzXCIsIEFEQVBURVJfU1RBVFVTLk5PVF9SRUFEWSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwicmVoeWRyYXRlZFwiLCBmYWxzZSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwibWV0YW1hc2tQcm92aWRlclwiLCBudWxsKTtcblxuICAgIF90aGlzLmNoYWluQ29uZmlnID0gKGFkYXB0ZXJPcHRpb25zID09PSBudWxsIHx8IGFkYXB0ZXJPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZGFwdGVyT3B0aW9ucy5jaGFpbkNvbmZpZykgfHwgbnVsbDtcbiAgICBfdGhpcy5zZXNzaW9uVGltZSA9IChhZGFwdGVyT3B0aW9ucyA9PT0gbnVsbCB8fCBhZGFwdGVyT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWRhcHRlck9wdGlvbnMuc2Vzc2lvblRpbWUpIHx8IDg2NDAwO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhNZXRhbWFza0FkYXB0ZXIsIFt7XG4gICAga2V5OiBcInByb3ZpZGVyXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAodGhpcy5zdGF0dXMgPT09IEFEQVBURVJfU1RBVFVTLkNPTk5FQ1RFRCAmJiB0aGlzLm1ldGFtYXNrUHJvdmlkZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0YW1hc2tQcm92aWRlcjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9pbml0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoTWV0YW1hc2tBZGFwdGVyLnByb3RvdHlwZSksIFwiY2hlY2tJbml0aWFsaXphdGlvblJlcXVpcmVtZW50c1wiLCB0aGlzKS5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRldGVjdEV0aGVyZXVtUHJvdmlkZXIoe1xuICAgICAgICAgICAgICAgICAgbXVzdEJlTWV0YU1hc2s6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgdGhpcy5tZXRhbWFza1Byb3ZpZGVyID0gX2NvbnRleHQuc2VudDtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1ldGFtYXNrUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2O1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5ub3RJbnN0YWxsZWQoXCJNZXRhbWFzayBleHRlbnNpb24gaXMgbm90IGluc3RhbGxlZFwiKTtcblxuICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBBREFQVEVSX1NUQVRVUy5SRUFEWTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoQURBUFRFUl9FVkVOVFMuUkVBRFksIFdBTExFVF9BREFQVEVSUy5NRVRBTUFTSyk7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDg7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiaW5pdGlhbGl6aW5nIG1ldGFtYXNrIGFkYXB0ZXJcIik7XG5cbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMuYXV0b0Nvbm5lY3QpIHtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMucmVoeWRyYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3QoKTtcblxuICAgICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNjtcbiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0W1wiY2F0Y2hcIl0oOCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KEFEQVBURVJfRVZFTlRTLkVSUk9SRUQsIF9jb250ZXh0LnQwKTtcblxuICAgICAgICAgICAgICBjYXNlIDE5OlxuICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbOCwgMTZdXSk7XG4gICAgICB9KSk7XG5cbiAgICAgIGZ1bmN0aW9uIGluaXQoX3gpIHtcbiAgICAgICAgcmV0dXJuIF9pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbml0O1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcInNldEFkYXB0ZXJTZXR0aW5nc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBZGFwdGVyU2V0dGluZ3Mob3B0aW9ucykge1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBBREFQVEVSX1NUQVRVUy5SRUFEWSkgcmV0dXJuO1xuXG4gICAgICBpZiAob3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgJiYgb3B0aW9ucy5zZXNzaW9uVGltZSkge1xuICAgICAgICB0aGlzLnNlc3Npb25UaW1lID0gb3B0aW9ucy5zZXNzaW9uVGltZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwICYmIG9wdGlvbnMuY2xpZW50SWQpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IG9wdGlvbnMuY2xpZW50SWQ7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbm5lY3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9jb25uZWN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHZhciBjaGFpbklkO1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihNZXRhbWFza0FkYXB0ZXIucHJvdG90eXBlKSwgXCJjaGVja0Nvbm5lY3Rpb25SZXF1aXJlbWVudHNcIiwgdGhpcykuY2FsbCh0aGlzKTsgLy8gc2V0IGRlZmF1bHQgdG8gbWFpbm5ldFxuXG5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hhaW5Db25maWcpIHRoaXMuY2hhaW5Db25maWcgPSBnZXRDaGFpbkNvbmZpZyhDSEFJTl9OQU1FU1BBQ0VTLkVJUDE1NSwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBBREFQVEVSX1NUQVRVUy5DT05ORUNUSU5HO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChBREFQVEVSX0VWRU5UUy5DT05ORUNUSU5HLCB7XG4gICAgICAgICAgICAgICAgICBhZGFwdGVyOiBXQUxMRVRfQURBUFRFUlMuTUVUQU1BU0tcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1ldGFtYXNrUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRocm93IFdhbGxldExvZ2luRXJyb3Iubm90Q29ubmVjdGVkRXJyb3IoXCJOb3QgYWJsZSB0byBjb25uZWN0IHdpdGggbWV0YW1hc2tcIik7XG5cbiAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNjtcbiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWV0YW1hc2tQcm92aWRlci5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJldGhfcmVxdWVzdEFjY291bnRzXCJcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgY2hhaW5JZCA9IHRoaXMubWV0YW1hc2tQcm92aWRlci5jaGFpbklkO1xuXG4gICAgICAgICAgICAgICAgaWYgKCEoY2hhaW5JZCAhPT0gdGhpcy5jaGFpbkNvbmZpZy5jaGFpbklkKSkge1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMztcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3dpdGNoQ2hhaW4odGhpcy5jaGFpbkNvbmZpZyk7XG5cbiAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IEFEQVBURVJfU1RBVFVTLkNPTk5FQ1RFRDtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE2O1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhyb3cgV2FsbGV0TG9naW5FcnJvci5ub3RDb25uZWN0ZWRFcnJvcihcIkZhaWxlZCB0byBjb25uZWN0IHdpdGggcHJvdmlkZXJcIik7XG5cbiAgICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgICB0aGlzLnByb3ZpZGVyLm9uY2UoXCJkaXNjb25uZWN0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIC8vIHJlYWR5IHRvIGJlIGNvbm5lY3RlZCBhZ2FpblxuICAgICAgICAgICAgICAgICAgX3RoaXMyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoQURBUFRFUl9FVkVOVFMuQ09OTkVDVEVELCB7XG4gICAgICAgICAgICAgICAgICBhZGFwdGVyOiBXQUxMRVRfQURBUFRFUlMuTUVUQU1BU0ssXG4gICAgICAgICAgICAgICAgICByZWNvbm5lY3RlZDogdGhpcy5yZWh5ZHJhdGVkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoXCJyZXR1cm5cIiwgdGhpcy5wcm92aWRlcik7XG5cbiAgICAgICAgICAgICAgY2FzZSAyMTpcbiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDIxO1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MltcImNhdGNoXCJdKDYpO1xuICAgICAgICAgICAgICAgIC8vIHJlYWR5IGFnYWluIHRvIGJlIGNvbm5lY3RlZFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gQURBUFRFUl9TVEFUVVMuUkVBRFk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWh5ZHJhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KEFEQVBURVJfRVZFTlRTLkVSUk9SRUQsIF9jb250ZXh0Mi50MCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgV2FsbGV0TG9naW5FcnJvci5jb25uZWN0aW9uRXJyb3IoXCJGYWlsZWQgdG8gbG9naW4gd2l0aCBtZXRhbWFzayB3YWxsZXRcIik7XG5cbiAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMsIFtbNiwgMjFdXSk7XG4gICAgICB9KSk7XG5cbiAgICAgIGZ1bmN0aW9uIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBfY29ubmVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29ubmVjdDtcbiAgICB9KClcbiAgfSwge1xuICAgIGtleTogXCJkaXNjb25uZWN0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfZGlzY29ubmVjdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkge1xuICAgICAgICB2YXIgX3RoaXMkcHJvdmlkZXI7XG5cbiAgICAgICAgdmFyIG9wdGlvbnMsXG4gICAgICAgICAgICBfYXJnczMgPSBhcmd1bWVudHM7XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0Mykge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBfYXJnczMubGVuZ3RoID4gMCAmJiBfYXJnczNbMF0gIT09IHVuZGVmaW5lZCA/IF9hcmdzM1swXSA6IHtcbiAgICAgICAgICAgICAgICAgIGNsZWFudXA6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9nZXQoX2dldFByb3RvdHlwZU9mKE1ldGFtYXNrQWRhcHRlci5wcm90b3R5cGUpLCBcImRpc2Nvbm5lY3RcIiwgdGhpcykuY2FsbCh0aGlzKTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgKF90aGlzJHByb3ZpZGVyID0gdGhpcy5wcm92aWRlcikgPT09IG51bGwgfHwgX3RoaXMkcHJvdmlkZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHByb3ZpZGVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2xlYW51cCkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBBREFQVEVSX1NUQVRVUy5OT1RfUkVBRFk7XG4gICAgICAgICAgICAgICAgICB0aGlzLm1ldGFtYXNrUHJvdmlkZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyByZWFkeSB0byBiZSBjb25uZWN0ZWQgYWdhaW5cbiAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gQURBUFRFUl9TVEFUVVMuUkVBRFk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5yZWh5ZHJhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KEFEQVBURVJfRVZFTlRTLkRJU0NPTk5FQ1RFRCk7XG5cbiAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7XG4gICAgICB9KSk7XG5cbiAgICAgIGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBfZGlzY29ubmVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGlzY29ubmVjdDtcbiAgICB9KClcbiAgfSwge1xuICAgIGtleTogXCJnZXRVc2VySW5mb1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2dldFVzZXJJbmZvID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGlmICghKHRoaXMuc3RhdHVzICE9PSBBREFQVEVSX1NUQVRVUy5DT05ORUNURUQpKSB7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aHJvdyBXYWxsZXRMb2dpbkVycm9yLm5vdENvbm5lY3RlZEVycm9yKFwiTm90IGNvbm5lY3RlZCB3aXRoIHdhbGxldCwgUGxlYXNlIGxvZ2luL2Nvbm5lY3QgZmlyc3RcIik7XG5cbiAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KFwicmV0dXJuXCIsIHt9KTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiBfZ2V0VXNlckluZm8uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGdldFVzZXJJbmZvO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcInN3aXRjaENoYWluXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfc3dpdGNoQ2hhaW4gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShjaGFpbkNvbmZpZykge1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tZXRhbWFza1Byb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aHJvdyBXYWxsZXRMb2dpbkVycm9yLm5vdENvbm5lY3RlZEVycm9yKFwiTm90IGNvbm5lY3RlZCB3aXRoIHdhbGxldFwiKTtcblxuICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAyO1xuICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tZXRhbWFza1Byb3ZpZGVyLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIndhbGxldF9zd2l0Y2hFdGhlcmV1bUNoYWluXCIsXG4gICAgICAgICAgICAgICAgICBwYXJhbXM6IFt7XG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IGNoYWluQ29uZmlnLmNoYWluSWRcbiAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gNztcbiAgICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDVbXCJjYXRjaFwiXSgyKTtcblxuICAgICAgICAgICAgICAgIGlmICghKF9jb250ZXh0NS50MC5jb2RlID09PSA0OTAyKSkge1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNDtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWV0YW1hc2tQcm92aWRlci5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJ3YWxsZXRfYWRkRXRoZXJldW1DaGFpblwiLFxuICAgICAgICAgICAgICAgICAgcGFyYW1zOiBbe1xuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiBjaGFpbkNvbmZpZy5jaGFpbklkLFxuICAgICAgICAgICAgICAgICAgICBjaGFpbk5hbWU6IGNoYWluQ29uZmlnLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICBycGNVcmxzOiBbY2hhaW5Db25maWcucnBjVGFyZ2V0XVxuICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDUudDA7XG5cbiAgICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTUsIHRoaXMsIFtbMiwgN11dKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gc3dpdGNoQ2hhaW4oX3gyKSB7XG4gICAgICAgIHJldHVybiBfc3dpdGNoQ2hhaW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN3aXRjaENoYWluO1xuICAgIH0oKVxuICB9XSk7XG5cbiAgcmV0dXJuIE1ldGFtYXNrQWRhcHRlcjtcbn0oQmFzZUV2bUFkYXB0ZXIpO1xuXG5leHBvcnQgeyBNZXRhbWFza0FkYXB0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ldGFtYXNrQWRhcHRlci5lc20uanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@web3auth/metamask-adapter/dist/metamaskAdapter.esm.js\n"));

/***/ }),

/***/ "./node_modules/@web3auth/metamask-adapter/node_modules/@web3auth/base-evm-adapter/dist/baseEvmAdapter.esm.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/@web3auth/metamask-adapter/node_modules/@web3auth/base-evm-adapter/dist/baseEvmAdapter.esm.js ***!
  \********************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseEvmAdapter: function() { return /* binding */ BaseEvmAdapter; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/esm/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _web3auth_base__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @web3auth/base */ \"./node_modules/@web3auth/metamask-adapter/node_modules/@web3auth/base/dist/base.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar BaseEvmAdapter = /*#__PURE__*/function (_BaseAdapter) {\n  (0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(BaseEvmAdapter, _BaseAdapter);\n\n  var _super = _createSuper(BaseEvmAdapter);\n\n  function BaseEvmAdapter() {\n    var _this;\n\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this, BaseEvmAdapter);\n\n    _this = _super.call(this);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this), \"clientId\", void 0);\n\n    _this.clientId = params.clientId;\n    return _this;\n  }\n\n  (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(BaseEvmAdapter, [{\n    key: \"authenticateUser\",\n    value: function () {\n      var _authenticateUser = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().mark(function _callee() {\n        var _this$chainConfig;\n\n        var _this$chainConfig2, chainNamespace, chainId, accounts, existingToken, isExpired, payload, challenge, signedMessage, idToken;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(!this.provider || !((_this$chainConfig = this.chainConfig) !== null && _this$chainConfig !== void 0 && _this$chainConfig.chainId))) {\n                  _context.next = 2;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_9__.WalletLoginError.notConnectedError();\n\n              case 2:\n                _this$chainConfig2 = this.chainConfig, chainNamespace = _this$chainConfig2.chainNamespace, chainId = _this$chainConfig2.chainId;\n\n                if (!(this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_9__.ADAPTER_STATUS.CONNECTED)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_9__.WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n\n              case 5:\n                _context.next = 7;\n                return this.provider.request({\n                  method: \"eth_accounts\"\n                });\n\n              case 7:\n                accounts = _context.sent;\n\n                if (!(accounts && accounts.length > 0)) {\n                  _context.next = 26;\n                  break;\n                }\n\n                existingToken = (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_9__.getSavedToken)(accounts[0], this.name);\n\n                if (!existingToken) {\n                  _context.next = 14;\n                  break;\n                }\n\n                isExpired = (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_9__.checkIfTokenIsExpired)(existingToken);\n\n                if (isExpired) {\n                  _context.next = 14;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", {\n                  idToken: existingToken\n                });\n\n              case 14:\n                payload = {\n                  domain: window.location.origin,\n                  uri: window.location.href,\n                  address: accounts[0],\n                  chainId: parseInt(chainId, 16),\n                  version: \"1\",\n                  nonce: Math.random().toString(36).slice(2),\n                  issuedAt: new Date().toISOString()\n                };\n                _context.next = 17;\n                return (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_9__.signChallenge)(payload, chainNamespace);\n\n              case 17:\n                challenge = _context.sent;\n                _context.next = 20;\n                return this.provider.request({\n                  method: \"personal_sign\",\n                  params: [challenge, accounts[0]]\n                });\n\n              case 20:\n                signedMessage = _context.sent;\n                _context.next = 23;\n                return (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_9__.verifySignedChallenge)(chainNamespace, signedMessage, challenge, this.name, this.sessionTime, this.clientId);\n\n              case 23:\n                idToken = _context.sent;\n                (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_9__.saveToken)(accounts[0], this.name, idToken);\n                return _context.abrupt(\"return\", {\n                  idToken: idToken\n                });\n\n              case 26:\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_9__.WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n\n              case 27:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function authenticateUser() {\n        return _authenticateUser.apply(this, arguments);\n      }\n\n      return authenticateUser;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().mark(function _callee2() {\n        var accounts;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_9__.ADAPTER_STATUS.CONNECTED)) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_9__.WalletLoginError.disconnectionError(\"Not connected with wallet\");\n\n              case 2:\n                _context2.next = 4;\n                return this.provider.request({\n                  method: \"eth_accounts\"\n                });\n\n              case 4:\n                accounts = _context2.sent;\n\n                if (accounts && accounts.length > 0) {\n                  (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_9__.clearToken)(accounts[0], this.name);\n                }\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }]);\n\n  return BaseEvmAdapter;\n}(_web3auth_base__WEBPACK_IMPORTED_MODULE_9__.BaseAdapter);\n\n\n//# sourceMappingURL=baseEvmAdapter.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHdlYjNhdXRoL21ldGFtYXNrLWFkYXB0ZXIvbm9kZV9tb2R1bGVzL0B3ZWIzYXV0aC9iYXNlLWV2bS1hZGFwdGVyL2Rpc3QvYmFzZUV2bUFkYXB0ZXIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUF3RTtBQUNKO0FBQ047QUFDb0I7QUFDMUI7QUFDa0M7QUFDdEI7QUFDQTtBQUNQO0FBQ3FIOztBQUVsTCxpQ0FBaUMsNkRBQTZELHlDQUF5QyxZQUFZLGlGQUFlLG1CQUFtQixpQ0FBaUMsZ0JBQWdCLGlGQUFlLG9CQUFvQiwyREFBMkQsT0FBTyx5Q0FBeUMsT0FBTyw0RkFBMEI7O0FBRXJaLHVDQUF1Qyx3RUFBd0UsMENBQTBDLDhDQUE4QyxNQUFNLDRFQUE0RSxJQUFJLGVBQWUsWUFBWTtBQUN4VDtBQUNBLEVBQUUsMkVBQVM7O0FBRVg7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxJQUFJLGlGQUFlOztBQUVuQjs7QUFFQSxJQUFJLGlGQUFlLENBQUMsd0ZBQXNCOztBQUUxQztBQUNBO0FBQ0E7O0FBRUEsRUFBRSw4RUFBWTtBQUNkO0FBQ0E7QUFDQSw4QkFBOEIsbUZBQWlCLGVBQWUsc0VBQXdCO0FBQ3RGOztBQUVBOztBQUVBLGVBQWUsc0VBQXdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNCQUFzQiw0REFBZ0I7O0FBRXRDO0FBQ0E7O0FBRUEsc0NBQXNDLDBEQUFjO0FBQ3BEO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0IsNERBQWdCOztBQUV0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQ0FBZ0MsNkRBQWE7O0FBRTdDO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDRCQUE0QixxRUFBcUI7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkRBQWE7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHFFQUFxQjs7QUFFNUM7QUFDQTtBQUNBLGdCQUFnQix5REFBUztBQUN6QjtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBLHNCQUFzQiw0REFBZ0I7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSx3QkFBd0IsbUZBQWlCLGVBQWUsc0VBQXdCO0FBQ2hGO0FBQ0EsZUFBZSxzRUFBd0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDBEQUFjO0FBQ3BEO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0IsNERBQWdCOztBQUV0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQiwwREFBVTtBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87O0FBRVA7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQSxDQUFDLENBQUMsdURBQVc7O0FBRWE7QUFDMUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0B3ZWIzYXV0aC9tZXRhbWFzay1hZGFwdGVyL25vZGVfbW9kdWxlcy9Ad2ViM2F1dGgvYmFzZS1ldm0tYWRhcHRlci9kaXN0L2Jhc2VFdm1BZGFwdGVyLmVzbS5qcz9kMzViIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3InO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJztcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyc7XG5pbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2Fzc2VydFRoaXNJbml0aWFsaXplZCc7XG5pbXBvcnQgX2luaGVyaXRzIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnO1xuaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybic7XG5pbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZ2V0UHJvdG90eXBlT2YnO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5JztcbmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gJ0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yJztcbmltcG9ydCB7IFdhbGxldExvZ2luRXJyb3IsIHNhdmVUb2tlbiwgdmVyaWZ5U2lnbmVkQ2hhbGxlbmdlLCBzaWduQ2hhbGxlbmdlLCBnZXRTYXZlZFRva2VuLCBjaGVja0lmVG9rZW5Jc0V4cGlyZWQsIEFEQVBURVJfU1RBVFVTLCBjbGVhclRva2VuLCBCYXNlQWRhcHRlciB9IGZyb20gJ0B3ZWIzYXV0aC9iYXNlJztcblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG52YXIgQmFzZUV2bUFkYXB0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9CYXNlQWRhcHRlcikge1xuICBfaW5oZXJpdHMoQmFzZUV2bUFkYXB0ZXIsIF9CYXNlQWRhcHRlcik7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihCYXNlRXZtQWRhcHRlcik7XG5cbiAgZnVuY3Rpb24gQmFzZUV2bUFkYXB0ZXIoKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQmFzZUV2bUFkYXB0ZXIpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJjbGllbnRJZFwiLCB2b2lkIDApO1xuXG4gICAgX3RoaXMuY2xpZW50SWQgPSBwYXJhbXMuY2xpZW50SWQ7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEJhc2VFdm1BZGFwdGVyLCBbe1xuICAgIGtleTogXCJhdXRoZW50aWNhdGVVc2VyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfYXV0aGVudGljYXRlVXNlciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgICAgIHZhciBfdGhpcyRjaGFpbkNvbmZpZztcblxuICAgICAgICB2YXIgX3RoaXMkY2hhaW5Db25maWcyLCBjaGFpbk5hbWVzcGFjZSwgY2hhaW5JZCwgYWNjb3VudHMsIGV4aXN0aW5nVG9rZW4sIGlzRXhwaXJlZCwgcGF5bG9hZCwgY2hhbGxlbmdlLCBzaWduZWRNZXNzYWdlLCBpZFRva2VuO1xuXG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMucHJvdmlkZXIgfHwgISgoX3RoaXMkY2hhaW5Db25maWcgPSB0aGlzLmNoYWluQ29uZmlnKSAhPT0gbnVsbCAmJiBfdGhpcyRjaGFpbkNvbmZpZyAhPT0gdm9pZCAwICYmIF90aGlzJGNoYWluQ29uZmlnLmNoYWluSWQpKSkge1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aHJvdyBXYWxsZXRMb2dpbkVycm9yLm5vdENvbm5lY3RlZEVycm9yKCk7XG5cbiAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIF90aGlzJGNoYWluQ29uZmlnMiA9IHRoaXMuY2hhaW5Db25maWcsIGNoYWluTmFtZXNwYWNlID0gX3RoaXMkY2hhaW5Db25maWcyLmNoYWluTmFtZXNwYWNlLCBjaGFpbklkID0gX3RoaXMkY2hhaW5Db25maWcyLmNoYWluSWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnN0YXR1cyAhPT0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVEVEKSkge1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aHJvdyBXYWxsZXRMb2dpbkVycm9yLm5vdENvbm5lY3RlZEVycm9yKFwiTm90IGNvbm5lY3RlZCB3aXRoIHdhbGxldCwgUGxlYXNlIGxvZ2luL2Nvbm5lY3QgZmlyc3RcIik7XG5cbiAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVyLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcImV0aF9hY2NvdW50c1wiXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgIGFjY291bnRzID0gX2NvbnRleHQuc2VudDtcblxuICAgICAgICAgICAgICAgIGlmICghKGFjY291bnRzICYmIGFjY291bnRzLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjY7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBleGlzdGluZ1Rva2VuID0gZ2V0U2F2ZWRUb2tlbihhY2NvdW50c1swXSwgdGhpcy5uYW1lKTtcblxuICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdUb2tlbikge1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0O1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaXNFeHBpcmVkID0gY2hlY2tJZlRva2VuSXNFeHBpcmVkKGV4aXN0aW5nVG9rZW4pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzRXhwaXJlZCkge1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0O1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCB7XG4gICAgICAgICAgICAgICAgICBpZFRva2VuOiBleGlzdGluZ1Rva2VuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICBwYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgICAgZG9tYWluOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLFxuICAgICAgICAgICAgICAgICAgdXJpOiB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGFjY291bnRzWzBdLFxuICAgICAgICAgICAgICAgICAgY2hhaW5JZDogcGFyc2VJbnQoY2hhaW5JZCwgMTYpLFxuICAgICAgICAgICAgICAgICAgdmVyc2lvbjogXCIxXCIsXG4gICAgICAgICAgICAgICAgICBub25jZTogTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiksXG4gICAgICAgICAgICAgICAgICBpc3N1ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25DaGFsbGVuZ2UocGF5bG9hZCwgY2hhaW5OYW1lc3BhY2UpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgY2hhbGxlbmdlID0gX2NvbnRleHQuc2VudDtcbiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXIucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICBtZXRob2Q6IFwicGVyc29uYWxfc2lnblwiLFxuICAgICAgICAgICAgICAgICAgcGFyYW1zOiBbY2hhbGxlbmdlLCBhY2NvdW50c1swXV1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgICAgICAgIHNpZ25lZE1lc3NhZ2UgPSBfY29udGV4dC5zZW50O1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMztcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVyaWZ5U2lnbmVkQ2hhbGxlbmdlKGNoYWluTmFtZXNwYWNlLCBzaWduZWRNZXNzYWdlLCBjaGFsbGVuZ2UsIHRoaXMubmFtZSwgdGhpcy5zZXNzaW9uVGltZSwgdGhpcy5jbGllbnRJZCk7XG5cbiAgICAgICAgICAgICAgY2FzZSAyMzpcbiAgICAgICAgICAgICAgICBpZFRva2VuID0gX2NvbnRleHQuc2VudDtcbiAgICAgICAgICAgICAgICBzYXZlVG9rZW4oYWNjb3VudHNbMF0sIHRoaXMubmFtZSwgaWRUb2tlbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCB7XG4gICAgICAgICAgICAgICAgICBpZFRva2VuOiBpZFRva2VuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY2FzZSAyNjpcbiAgICAgICAgICAgICAgICB0aHJvdyBXYWxsZXRMb2dpbkVycm9yLm5vdENvbm5lY3RlZEVycm9yKFwiTm90IGNvbm5lY3RlZCB3aXRoIHdhbGxldCwgUGxlYXNlIGxvZ2luL2Nvbm5lY3QgZmlyc3RcIik7XG5cbiAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gYXV0aGVudGljYXRlVXNlcigpIHtcbiAgICAgICAgcmV0dXJuIF9hdXRoZW50aWNhdGVVc2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhdXRoZW50aWNhdGVVc2VyO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcImRpc2Nvbm5lY3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9kaXNjb25uZWN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7XG4gICAgICAgIHZhciBhY2NvdW50cztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgaWYgKCEodGhpcy5zdGF0dXMgIT09IEFEQVBURVJfU1RBVFVTLkNPTk5FQ1RFRCkpIHtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRocm93IFdhbGxldExvZ2luRXJyb3IuZGlzY29ubmVjdGlvbkVycm9yKFwiTm90IGNvbm5lY3RlZCB3aXRoIHdhbGxldFwiKTtcblxuICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVyLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcImV0aF9hY2NvdW50c1wiXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIGFjY291bnRzID0gX2NvbnRleHQyLnNlbnQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudHMgJiYgYWNjb3VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgY2xlYXJUb2tlbihhY2NvdW50c1swXSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7XG4gICAgICB9KSk7XG5cbiAgICAgIGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBfZGlzY29ubmVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGlzY29ubmVjdDtcbiAgICB9KClcbiAgfV0pO1xuXG4gIHJldHVybiBCYXNlRXZtQWRhcHRlcjtcbn0oQmFzZUFkYXB0ZXIpO1xuXG5leHBvcnQgeyBCYXNlRXZtQWRhcHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZUV2bUFkYXB0ZXIuZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@web3auth/metamask-adapter/node_modules/@web3auth/base-evm-adapter/dist/baseEvmAdapter.esm.js\n"));

/***/ }),

/***/ "./node_modules/@web3auth/metamask-adapter/node_modules/@web3auth/base/dist/base.esm.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@web3auth/metamask-adapter/node_modules/@web3auth/base/dist/base.esm.js ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ADAPTER_CATEGORY: function() { return /* binding */ ADAPTER_CATEGORY; },\n/* harmony export */   ADAPTER_EVENTS: function() { return /* binding */ ADAPTER_EVENTS; },\n/* harmony export */   ADAPTER_NAMESPACES: function() { return /* binding */ ADAPTER_NAMESPACES; },\n/* harmony export */   ADAPTER_STATUS: function() { return /* binding */ ADAPTER_STATUS; },\n/* harmony export */   BaseAdapter: function() { return /* binding */ BaseAdapter; },\n/* harmony export */   BaseNetworkSwitch: function() { return /* binding */ BaseNetworkSwitch; },\n/* harmony export */   CHAIN_NAMESPACES: function() { return /* binding */ CHAIN_NAMESPACES; },\n/* harmony export */   EVM_ADAPTERS: function() { return /* binding */ EVM_ADAPTERS; },\n/* harmony export */   MULTI_CHAIN_ADAPTERS: function() { return /* binding */ MULTI_CHAIN_ADAPTERS; },\n/* harmony export */   PROVIDER_EVENTS: function() { return /* binding */ PROVIDER_EVENTS; },\n/* harmony export */   SOLANA_ADAPTERS: function() { return /* binding */ SOLANA_ADAPTERS; },\n/* harmony export */   WALLET_ADAPTERS: function() { return /* binding */ WALLET_ADAPTERS; },\n/* harmony export */   WalletInitializationError: function() { return /* binding */ WalletInitializationError; },\n/* harmony export */   WalletLoginError: function() { return /* binding */ WalletLoginError; },\n/* harmony export */   Web3AuthError: function() { return /* binding */ Web3AuthError; },\n/* harmony export */   authServer: function() { return /* binding */ authServer; },\n/* harmony export */   checkIfTokenIsExpired: function() { return /* binding */ checkIfTokenIsExpired; },\n/* harmony export */   clearToken: function() { return /* binding */ clearToken; },\n/* harmony export */   getChainConfig: function() { return /* binding */ getChainConfig; },\n/* harmony export */   getEvmChainConfig: function() { return /* binding */ getEvmChainConfig; },\n/* harmony export */   getSavedToken: function() { return /* binding */ getSavedToken; },\n/* harmony export */   getSolanaChainConfig: function() { return /* binding */ getSolanaChainConfig; },\n/* harmony export */   isHexStrict: function() { return /* binding */ isHexStrict; },\n/* harmony export */   log: function() { return /* binding */ log; },\n/* harmony export */   saveToken: function() { return /* binding */ saveToken; },\n/* harmony export */   signChallenge: function() { return /* binding */ signChallenge; },\n/* harmony export */   storageAvailable: function() { return /* binding */ storageAvailable; },\n/* harmony export */   verifySignedChallenge: function() { return /* binding */ verifySignedChallenge; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/esm/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @toruslabs/openlogin-jrpc */ \"./node_modules/@toruslabs/openlogin-jrpc/dist/openloginJrpc.esm.js\");\n/* harmony import */ var ts_custom_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ts-custom-error */ \"./node_modules/ts-custom-error/dist/custom-error.mjs\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @toruslabs/http-helpers */ \"./node_modules/@toruslabs/http-helpers/dist/httpHelpers.esm.js\");\n/* harmony import */ var jwt_decode__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jwt-decode */ \"./node_modules/jwt-decode/build/jwt-decode.esm.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! loglevel */ \"./node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_13__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar CHAIN_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  OTHER: \"other\"\n};\nvar ADAPTER_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  MULTICHAIN: \"multichain\"\n};\n\nvar getDefaultNetworkId = function getDefaultNetworkId(chainNamespace) {\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return 1;\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return 1;\n  }\n\n  throw new Error(\"Chain namespace \".concat(chainNamespace, \" is not supported\"));\n};\n\nvar getEvmChainConfig = function getEvmChainConfig(chainId) {\n  var chainNamespace = CHAIN_NAMESPACES.EIP155;\n\n  if (chainId === 1) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x1\",\n      rpcTarget: \"https://rpc.ankr.com/eth\",\n      displayName: \"Ethereum Mainnet\",\n      blockExplorer: \"https://etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  }\n\n  if (chainId === 3) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x3\",\n      rpcTarget: \"https://rpc.ankr.com/eth_ropsten\",\n      displayName: \"Ropsten Testnet\",\n      blockExplorer: \"https://ropsten.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  }\n\n  if (chainId === 4) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x4\",\n      rpcTarget: \"https://rpc.ankr.com/eth_rinkeby\",\n      displayName: \"Rinkeby Testnet\",\n      blockExplorer: \"https://rinkeby.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  }\n\n  if (chainId === 5) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x5\",\n      rpcTarget: \"https://rpc.ankr.com/eth_goerli\",\n      displayName: \"Goerli Testnet\",\n      blockExplorer: \"https://goerli.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  }\n\n  if (chainId === 137) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x89\",\n      rpcTarget: \"https://rpc.ankr.com/polygon\",\n      displayName: \"Polygon Mainnet\",\n      blockExplorer: \"https://polygonscan.com\",\n      ticker: \"MATIC\",\n      tickerName: \"Polygon\"\n    };\n  }\n\n  if (chainId === 80001) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x13881\",\n      rpcTarget: \"https://rpc.ankr.com/polygon_mumbai\",\n      displayName: \"Polygon Mumbai Testnet\",\n      blockExplorer: \"https://mumbai.polygonscan.com/\",\n      ticker: \"MATIC\",\n      tickerName: \"Polygon\"\n    };\n  }\n\n  if (chainId === 56) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x38\",\n      rpcTarget: \"https://rpc.ankr.com/bsc\",\n      displayName: \"Binance SmartChain Mainnet\",\n      blockExplorer: \"https://bscscan.com\",\n      ticker: \"BNB\",\n      tickerName: \"Binance SmartChain\"\n    };\n  }\n\n  if (chainId === 97) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x61\",\n      rpcTarget: \"https://rpc.ankr.com/bsc_testnet_chapel\",\n      displayName: \"Binance SmartChain Testnet\",\n      blockExplorer: \"https://testnet.bscscan.com\",\n      ticker: \"BNB\",\n      tickerName: \"Binance SmartChain\"\n    };\n  }\n\n  if (chainId === 25) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x19\",\n      rpcTarget: \"https://rpc.cronos.org\",\n      displayName: \"Cronos Mainnet\",\n      blockExplorer: \"https://cronoscan.com/\",\n      ticker: \"CRO\",\n      tickerName: \"Cronos\"\n    };\n  }\n\n  if (chainId === 338) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x152\",\n      rpcTarget: \"https://rpc-t3.cronos.org/\",\n      displayName: \"Cronos Testnet\",\n      blockExplorer: \"https://cronoscan.com/\",\n      ticker: \"CRO\",\n      tickerName: \"Cronos\"\n    };\n  }\n\n  if (chainId === 8217) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x2019\",\n      rpcTarget: \"https://public-node-api.klaytnapi.com/v1/cypress\",\n      displayName: \"Klaytn Mainnet\",\n      blockExplorer: \"https://scope.klaytn.com\",\n      ticker: \"KLAY\",\n      tickerName: \"Klaytn\"\n    };\n  }\n\n  return null;\n};\nvar getSolanaChainConfig = function getSolanaChainConfig(chainId) {\n  var chainNamespace = CHAIN_NAMESPACES.SOLANA;\n\n  if (chainId === 1) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x1\",\n      rpcTarget: \"https://rpc.ankr.com/solana\",\n      displayName: \"Solana Mainnet\",\n      blockExplorer: \"https://explorer.solana.com\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\"\n    };\n  } else if (chainId === 2) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x2\",\n      rpcTarget: \"https://api.testnet.solana.com\",\n      displayName: \"Solana Testnet\",\n      blockExplorer: \"https://explorer.solana.com?cluster=testnet\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\"\n    };\n  } else if (chainId === 3) {\n    return {\n      chainNamespace: chainNamespace,\n      chainId: \"0x3\",\n      rpcTarget: \"https://api.devnet.solana.com\",\n      displayName: \"Solana Devnet\",\n      blockExplorer: \"https://explorer.solana.com?cluster=devnet\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\"\n    };\n  }\n\n  return null;\n};\nvar getChainConfig = function getChainConfig(chainNamespace, chainId) {\n  if (chainNamespace === CHAIN_NAMESPACES.OTHER) return null;\n  var finalChainId = chainId ? typeof chainId === \"number\" ? chainId : parseInt(chainId, 16) : getDefaultNetworkId(chainNamespace);\n\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return getEvmChainConfig(finalChainId);\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return getSolanaChainConfig(finalChainId);\n  }\n\n  return null;\n};\n\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar Web3AuthError = /*#__PURE__*/function (_CustomError) {\n  (0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(Web3AuthError, _CustomError);\n\n  var _super = _createSuper$1(Web3AuthError);\n\n  function Web3AuthError(code, message) {\n    var _this;\n\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, Web3AuthError);\n\n    // takes care of stack and proto\n    _this = _super.call(this, message);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_this), \"code\", void 0);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_this), \"message\", void 0);\n\n    _this.code = code;\n    _this.message = message || \"\"; // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_this), \"name\", {\n      value: \"Web3AuthError\"\n    });\n    return _this;\n  }\n\n  (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(Web3AuthError, [{\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        name: this.name,\n        code: this.code,\n        message: this.message\n      };\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return JSON.stringify(this.toJSON());\n    }\n  }]);\n\n  return Web3AuthError;\n}(ts_custom_error__WEBPACK_IMPORTED_MODULE_8__.CustomError);\nvar WalletInitializationError = /*#__PURE__*/function (_Web3AuthError) {\n  (0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(WalletInitializationError, _Web3AuthError);\n\n  var _super2 = _createSuper$1(WalletInitializationError);\n\n  function WalletInitializationError(code, message) {\n    var _this2;\n\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, WalletInitializationError);\n\n    // takes care of stack and proto\n    _this2 = _super2.call(this, code, message); // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_this2), \"name\", {\n      value: \"WalletInitializationError\"\n    });\n    return _this2;\n  }\n\n  (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(WalletInitializationError, null, [{\n    key: \"fromCode\",\n    value: function fromCode(code) {\n      var extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      return new WalletInitializationError(code, \"\".concat(WalletInitializationError.messages[code], \", \").concat(extraMessage));\n    } // Custom methods\n\n  }, {\n    key: \"notFound\",\n    value: function notFound() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5001, extraMessage);\n    }\n  }, {\n    key: \"notInstalled\",\n    value: function notInstalled() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5002, extraMessage);\n    }\n  }, {\n    key: \"notReady\",\n    value: function notReady() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5003, extraMessage);\n    }\n  }, {\n    key: \"windowBlocked\",\n    value: function windowBlocked() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5004, extraMessage);\n    }\n  }, {\n    key: \"windowClosed\",\n    value: function windowClosed() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5005, extraMessage);\n    }\n  }, {\n    key: \"incompatibleChainNameSpace\",\n    value: function incompatibleChainNameSpace() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5006, extraMessage);\n    }\n  }, {\n    key: \"duplicateAdapterError\",\n    value: function duplicateAdapterError() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5007, extraMessage);\n    }\n  }, {\n    key: \"invalidProviderConfigError\",\n    value: function invalidProviderConfigError() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5008, extraMessage);\n    }\n  }, {\n    key: \"providerNotReadyError\",\n    value: function providerNotReadyError() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5009, extraMessage);\n    }\n  }, {\n    key: \"rpcConnectionError\",\n    value: function rpcConnectionError() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5010, extraMessage);\n    }\n  }, {\n    key: \"invalidParams\",\n    value: function invalidParams() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5011, extraMessage);\n    }\n  }, {\n    key: \"invalidNetwork\",\n    value: function invalidNetwork() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletInitializationError.fromCode(5013, extraMessage);\n    }\n  }]);\n\n  return WalletInitializationError;\n}(Web3AuthError);\n/**\n * wallet login errors\n */\n\n(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(WalletInitializationError, \"messages\", {\n  5000: \"Custom\",\n  5001: \"Wallet is not found\",\n  5002: \"Wallet is not installed\",\n  5003: \"Wallet is not ready yet\",\n  5004: \"Wallet window is blocked\",\n  5005: \"Wallet window has been closed by the user\",\n  5006: \"Incompatible chain namespace provided\",\n  5007: \"Adapter has already been included\",\n  5008: \"Invalid provider Config\",\n  5009: \"Provider is not ready yet\",\n  5010: \"Failed to connect with rpc url\",\n  5011: \"Invalid params passed in\",\n  5013: \"Invalid network provided\"\n});\n\nvar WalletLoginError = /*#__PURE__*/function (_Web3AuthError2) {\n  (0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(WalletLoginError, _Web3AuthError2);\n\n  var _super3 = _createSuper$1(WalletLoginError);\n\n  function WalletLoginError(code, message) {\n    var _this3;\n\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, WalletLoginError);\n\n    // takes care of stack and proto\n    _this3 = _super3.call(this, code, message); // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_this3), \"name\", {\n      value: \"WalletLoginError\"\n    });\n    return _this3;\n  }\n\n  (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(WalletLoginError, null, [{\n    key: \"fromCode\",\n    value: function fromCode(code) {\n      var extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      return new WalletLoginError(code, \"\".concat(WalletLoginError.messages[code]).concat(extraMessage));\n    }\n  }, {\n    key: \"connectionError\",\n    value: function connectionError() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletLoginError.fromCode(5111, extraMessage);\n    }\n  }, {\n    key: \"disconnectionError\",\n    value: function disconnectionError() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletLoginError.fromCode(5112, extraMessage);\n    }\n  }, {\n    key: \"notConnectedError\",\n    value: function notConnectedError() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletLoginError.fromCode(5113, extraMessage);\n    }\n  }, {\n    key: \"popupClosed\",\n    value: function popupClosed() {\n      var extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return WalletLoginError.fromCode(5114, extraMessage);\n    }\n  }]);\n\n  return WalletLoginError;\n}(Web3AuthError);\n\n(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(WalletLoginError, \"messages\", {\n  5000: \"Custom\",\n  5111: \"Failed to connect with wallet\",\n  5112: \"Failed to disconnect from wallet\",\n  5113: \"Wallet is not connected\",\n  5114: \"Wallet popup has been closed by the user\"\n});\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar MULTI_CHAIN_ADAPTERS = {\n  OPENLOGIN: \"openlogin\",\n  WALLET_CONNECT_V1: \"wallet-connect-v1\",\n  WALLET_CONNECT_V2: \"wallet-connect-v2\"\n};\nvar SOLANA_ADAPTERS = _objectSpread$1({\n  TORUS_SOLANA: \"torus-solana\",\n  PHANTOM: \"phantom\",\n  SOLLET: \"sollet\",\n  SOLLET_EXTENSION: \"sollet-extension\",\n  SOLFLARE: \"solflare\",\n  SLOPE: \"slope\"\n}, MULTI_CHAIN_ADAPTERS);\nvar EVM_ADAPTERS = _objectSpread$1({\n  TORUS_EVM: \"torus-evm\",\n  METAMASK: \"metamask\",\n  COINBASE: \"coinbase\"\n}, MULTI_CHAIN_ADAPTERS);\nvar WALLET_ADAPTERS = _objectSpread$1(_objectSpread$1({}, EVM_ADAPTERS), SOLANA_ADAPTERS);\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar ADAPTER_CATEGORY = {\n  EXTERNAL: \"external\",\n  IN_APP: \"in_app\"\n};\nvar ADAPTER_STATUS = {\n  NOT_READY: \"not_ready\",\n  READY: \"ready\",\n  CONNECTING: \"connecting\",\n  CONNECTED: \"connected\",\n  DISCONNECTED: \"disconnected\",\n  ERRORED: \"errored\"\n};\nvar ADAPTER_EVENTS = _objectSpread(_objectSpread({}, ADAPTER_STATUS), {}, {\n  ADAPTER_DATA_UPDATED: \"adapter_data_updated\"\n});\nvar BaseAdapter = /*#__PURE__*/function (_SafeEventEmitter) {\n  (0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(BaseAdapter, _SafeEventEmitter);\n\n  var _super = _createSuper(BaseAdapter);\n\n  function BaseAdapter() {\n    var _this;\n\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, BaseAdapter);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_this), \"adapterData\", {});\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_this), \"sessionTime\", 86400);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_this), \"chainConfig\", null);\n\n    return _this;\n  }\n\n  (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(BaseAdapter, [{\n    key: \"chainConfigProxy\",\n    get: function get() {\n      return this.chainConfig ? _objectSpread({}, this.chainConfig) : null;\n    }\n  }, {\n    key: \"setChainConfig\",\n    value: function setChainConfig(customChainConfig) {\n      if (this.status === ADAPTER_STATUS.READY) return;\n      if (!customChainConfig.chainNamespace) throw WalletInitializationError.notReady(\"ChainNamespace is required while setting chainConfig\");\n      var defaultChainConfig = getChainConfig(customChainConfig.chainNamespace, customChainConfig.chainId);\n      this.chainConfig = _objectSpread(_objectSpread({}, defaultChainConfig), customChainConfig);\n    }\n  }, {\n    key: \"setAdapterSettings\",\n    value: function setAdapterSettings(_) {}\n  }, {\n    key: \"checkConnectionRequirements\",\n    value: function checkConnectionRequirements() {\n      // we reconnect without killing existing wallet connect session on calling connect again.\n      if (this.name === WALLET_ADAPTERS.WALLET_CONNECT_V1 && this.status === ADAPTER_STATUS.CONNECTING) return;else if (this.status === ADAPTER_STATUS.CONNECTING) throw WalletInitializationError.notReady(\"Already connecting\");\n      if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletLoginError.connectionError(\"Already connected\");\n      if (this.status !== ADAPTER_STATUS.READY) throw WalletLoginError.connectionError(\"Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function\");\n      if (!this.clientId) throw WalletLoginError.connectionError(\"Please initialize Web3Auth with a valid clientId in constructor\");\n    }\n  }, {\n    key: \"checkInitializationRequirements\",\n    value: function checkInitializationRequirements() {\n      if (this.status === ADAPTER_STATUS.NOT_READY) return;\n      if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletInitializationError.notReady(\"Already connected\");\n      if (this.status === ADAPTER_STATUS.READY) throw WalletInitializationError.notReady(\"Adapter is already initialized\");\n    }\n  }, {\n    key: \"updateAdapterData\",\n    value: function updateAdapterData(data) {\n      this.adapterData = data;\n      this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, {\n        adapterName: this.name,\n        data: data\n      });\n    }\n  }]);\n\n  return BaseAdapter;\n}(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7__.SafeEventEmitter);\nvar BaseNetworkSwitch = /*#__PURE__*/(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(function BaseNetworkSwitch() {\n  (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, BaseNetworkSwitch);\n});\n\nvar authServer = \"https://authjs.web3auth.io\";\n\nvar log = loglevel__WEBPACK_IMPORTED_MODULE_13___default().getLogger(\"web3auth-logger\");\n\nfunction storageAvailable(type) {\n  var storageExists = false;\n  var storageLength = 0;\n  var storage;\n\n  try {\n    storage = window[type];\n    storageExists = true;\n    storageLength = storage.length;\n    var x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (error) {\n    var _error = error;\n    return !!(_error && ( // everything except Firefox\n    _error.code === 22 || // Firefox\n    _error.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    _error.name === \"QuotaExceededError\" || // Firefox\n    _error.name === \"NS_ERROR_DOM_QUOTA_REACHED\") && // acknowledge QuotaExceededError only if there's something already stored\n    storageExists && storageLength !== 0);\n  }\n}\nvar isHexStrict = function isHexStrict(hex) {\n  return (typeof hex === \"string\" || typeof hex === \"number\") && /^(-)?0x[0-9a-f]*$/i.test(hex);\n};\n\nvar checkIfTokenIsExpired = function checkIfTokenIsExpired(token) {\n  var decoded = (0,jwt_decode__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(token);\n\n  if (!decoded.exp) {\n    return true;\n  }\n\n  if (decoded.exp < Math.floor(Date.now() / 1000)) {\n    return true;\n  }\n\n  return false;\n};\nvar signChallenge = /*#__PURE__*/function () {\n  var _ref = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_9__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default().mark(function _callee(payload, chainNamespace) {\n    var t, header, network, data, res;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            t = chainNamespace === \"solana\" ? \"sip99\" : \"eip191\";\n            header = {\n              t: t\n            };\n            network = chainNamespace === \"solana\" ? \"solana\" : \"ethereum\";\n            data = {\n              payload: payload,\n              header: header,\n              network: network\n            };\n            _context.next = 6;\n            return (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_11__.post)(\"\".concat(authServer, \"/siww/get\"), data);\n\n          case 6:\n            res = _context.sent;\n\n            if (res.success) {\n              _context.next = 9;\n              break;\n            }\n\n            throw new Error(\"Failed to authenticate user, Please reach out to Web3Auth Support team\");\n\n          case 9:\n            return _context.abrupt(\"return\", res.challenge);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function signChallenge(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar verifySignedChallenge = /*#__PURE__*/function () {\n  var _ref2 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_9__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default().mark(function _callee2(chainNamespace, signedMessage, challenge, issuer, sessionTime, clientId) {\n    var t, sigData, idTokenRes;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            t = chainNamespace === \"solana\" ? \"sip99\" : \"eip191\";\n            sigData = {\n              signature: {\n                s: signedMessage,\n                t: t\n              },\n              message: challenge,\n              issuer: issuer,\n              audience: window.location.hostname,\n              timeout: sessionTime\n            };\n            _context2.next = 4;\n            return (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_11__.post)(\"\".concat(authServer, \"/siww/verify\"), sigData, {\n              headers: {\n                client_id: clientId,\n                wallet_provider: issuer\n              }\n            });\n\n          case 4:\n            idTokenRes = _context2.sent;\n\n            if (idTokenRes.success) {\n              _context2.next = 8;\n              break;\n            }\n\n            log.error(\"Failed to authenticate user, ,message verification failed\", idTokenRes.error);\n            throw new Error(\"Failed to authenticate user, ,message verification failed\");\n\n          case 8:\n            return _context2.abrupt(\"return\", idTokenRes.token);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function verifySignedChallenge(_x3, _x4, _x5, _x6, _x7, _x8) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getSavedToken = function getSavedToken(userAddress, issuer) {\n  if (storageAvailable(\"localStorage\")) {\n    return localStorage.getItem(\"\".concat(userAddress.toLowerCase(), \"_\").concat(issuer));\n  }\n\n  return null;\n};\nvar saveToken = function saveToken(userAddress, issuer, token) {\n  if (storageAvailable(\"localStorage\")) {\n    return localStorage.setItem(\"\".concat(userAddress.toLowerCase(), \"_\").concat(issuer), token);\n  }\n\n  return null;\n};\nvar clearToken = function clearToken(userAddress, issuer) {\n  if (storageAvailable(\"localStorage\")) {\n    return localStorage.removeItem(\"\".concat(userAddress.toLowerCase(), \"_\").concat(issuer));\n  }\n\n  return null;\n};\n\nvar PROVIDER_EVENTS = {\n  INITIALIZED: \"initialized\",\n  ERRORED: \"errored\"\n};\n\n\n//# sourceMappingURL=base.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHdlYjNhdXRoL21ldGFtYXNrLWFkYXB0ZXIvbm9kZV9tb2R1bGVzL0B3ZWIzYXV0aC9iYXNlL2Rpc3QvYmFzZS5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0U7QUFDTjtBQUNvQjtBQUMxQjtBQUNrQztBQUN0QjtBQUNBO0FBQ1A7QUFDZjtBQUMwQjtBQUNYO0FBQ2Q7QUFDWjtBQUNIOztBQUVoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNEO0FBQ0EsY0FBYyxtRkFBaUIsZUFBZSx1RUFBd0I7QUFDdEU7QUFDQSxXQUFXLHVFQUF3QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw4REFBSTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRWllO0FBQ2plIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9Ad2ViM2F1dGgvbWV0YW1hc2stYWRhcHRlci9ub2RlX21vZHVsZXMvQHdlYjNhdXRoL2Jhc2UvZGlzdC9iYXNlLmVzbS5qcz85ODljIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayc7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnO1xuaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQnO1xuaW1wb3J0IF9pbmhlcml0cyBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJztcbmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nO1xuaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mJztcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSc7XG5pbXBvcnQgeyBTYWZlRXZlbnRFbWl0dGVyIH0gZnJvbSAnQHRvcnVzbGFicy9vcGVubG9naW4tanJwYyc7XG5pbXBvcnQgeyBDdXN0b21FcnJvciB9IGZyb20gJ3RzLWN1c3RvbS1lcnJvcic7XG5pbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yJztcbmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gJ0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yJztcbmltcG9ydCB7IHBvc3QgfSBmcm9tICdAdG9ydXNsYWJzL2h0dHAtaGVscGVycyc7XG5pbXBvcnQgSnd0RGVjb2RlIGZyb20gJ2p3dC1kZWNvZGUnO1xuaW1wb3J0IGxvZ2xldmVsIGZyb20gJ2xvZ2xldmVsJztcblxudmFyIENIQUlOX05BTUVTUEFDRVMgPSB7XG4gIEVJUDE1NTogXCJlaXAxNTVcIixcbiAgU09MQU5BOiBcInNvbGFuYVwiLFxuICBPVEhFUjogXCJvdGhlclwiXG59O1xudmFyIEFEQVBURVJfTkFNRVNQQUNFUyA9IHtcbiAgRUlQMTU1OiBcImVpcDE1NVwiLFxuICBTT0xBTkE6IFwic29sYW5hXCIsXG4gIE1VTFRJQ0hBSU46IFwibXVsdGljaGFpblwiXG59O1xuXG52YXIgZ2V0RGVmYXVsdE5ldHdvcmtJZCA9IGZ1bmN0aW9uIGdldERlZmF1bHROZXR3b3JrSWQoY2hhaW5OYW1lc3BhY2UpIHtcbiAgaWYgKGNoYWluTmFtZXNwYWNlID09PSBDSEFJTl9OQU1FU1BBQ0VTLkVJUDE1NSkge1xuICAgIHJldHVybiAxO1xuICB9IGVsc2UgaWYgKGNoYWluTmFtZXNwYWNlID09PSBDSEFJTl9OQU1FU1BBQ0VTLlNPTEFOQSkge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKFwiQ2hhaW4gbmFtZXNwYWNlIFwiLmNvbmNhdChjaGFpbk5hbWVzcGFjZSwgXCIgaXMgbm90IHN1cHBvcnRlZFwiKSk7XG59O1xuXG52YXIgZ2V0RXZtQ2hhaW5Db25maWcgPSBmdW5jdGlvbiBnZXRFdm1DaGFpbkNvbmZpZyhjaGFpbklkKSB7XG4gIHZhciBjaGFpbk5hbWVzcGFjZSA9IENIQUlOX05BTUVTUEFDRVMuRUlQMTU1O1xuXG4gIGlmIChjaGFpbklkID09PSAxKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYWluTmFtZXNwYWNlOiBjaGFpbk5hbWVzcGFjZSxcbiAgICAgIGNoYWluSWQ6IFwiMHgxXCIsXG4gICAgICBycGNUYXJnZXQ6IFwiaHR0cHM6Ly9ycGMuYW5rci5jb20vZXRoXCIsXG4gICAgICBkaXNwbGF5TmFtZTogXCJFdGhlcmV1bSBNYWlubmV0XCIsXG4gICAgICBibG9ja0V4cGxvcmVyOiBcImh0dHBzOi8vZXRoZXJzY2FuLmlvL1wiLFxuICAgICAgdGlja2VyOiBcIkVUSFwiLFxuICAgICAgdGlja2VyTmFtZTogXCJFdGhlcmV1bVwiXG4gICAgfTtcbiAgfVxuXG4gIGlmIChjaGFpbklkID09PSAzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYWluTmFtZXNwYWNlOiBjaGFpbk5hbWVzcGFjZSxcbiAgICAgIGNoYWluSWQ6IFwiMHgzXCIsXG4gICAgICBycGNUYXJnZXQ6IFwiaHR0cHM6Ly9ycGMuYW5rci5jb20vZXRoX3JvcHN0ZW5cIixcbiAgICAgIGRpc3BsYXlOYW1lOiBcIlJvcHN0ZW4gVGVzdG5ldFwiLFxuICAgICAgYmxvY2tFeHBsb3JlcjogXCJodHRwczovL3JvcHN0ZW4uZXRoZXJzY2FuLmlvL1wiLFxuICAgICAgdGlja2VyOiBcIkVUSFwiLFxuICAgICAgdGlja2VyTmFtZTogXCJFdGhlcmV1bVwiXG4gICAgfTtcbiAgfVxuXG4gIGlmIChjaGFpbklkID09PSA0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYWluTmFtZXNwYWNlOiBjaGFpbk5hbWVzcGFjZSxcbiAgICAgIGNoYWluSWQ6IFwiMHg0XCIsXG4gICAgICBycGNUYXJnZXQ6IFwiaHR0cHM6Ly9ycGMuYW5rci5jb20vZXRoX3JpbmtlYnlcIixcbiAgICAgIGRpc3BsYXlOYW1lOiBcIlJpbmtlYnkgVGVzdG5ldFwiLFxuICAgICAgYmxvY2tFeHBsb3JlcjogXCJodHRwczovL3JpbmtlYnkuZXRoZXJzY2FuLmlvL1wiLFxuICAgICAgdGlja2VyOiBcIkVUSFwiLFxuICAgICAgdGlja2VyTmFtZTogXCJFdGhlcmV1bVwiXG4gICAgfTtcbiAgfVxuXG4gIGlmIChjaGFpbklkID09PSA1KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYWluTmFtZXNwYWNlOiBjaGFpbk5hbWVzcGFjZSxcbiAgICAgIGNoYWluSWQ6IFwiMHg1XCIsXG4gICAgICBycGNUYXJnZXQ6IFwiaHR0cHM6Ly9ycGMuYW5rci5jb20vZXRoX2dvZXJsaVwiLFxuICAgICAgZGlzcGxheU5hbWU6IFwiR29lcmxpIFRlc3RuZXRcIixcbiAgICAgIGJsb2NrRXhwbG9yZXI6IFwiaHR0cHM6Ly9nb2VybGkuZXRoZXJzY2FuLmlvL1wiLFxuICAgICAgdGlja2VyOiBcIkVUSFwiLFxuICAgICAgdGlja2VyTmFtZTogXCJFdGhlcmV1bVwiXG4gICAgfTtcbiAgfVxuXG4gIGlmIChjaGFpbklkID09PSAxMzcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhaW5OYW1lc3BhY2U6IGNoYWluTmFtZXNwYWNlLFxuICAgICAgY2hhaW5JZDogXCIweDg5XCIsXG4gICAgICBycGNUYXJnZXQ6IFwiaHR0cHM6Ly9ycGMuYW5rci5jb20vcG9seWdvblwiLFxuICAgICAgZGlzcGxheU5hbWU6IFwiUG9seWdvbiBNYWlubmV0XCIsXG4gICAgICBibG9ja0V4cGxvcmVyOiBcImh0dHBzOi8vcG9seWdvbnNjYW4uY29tXCIsXG4gICAgICB0aWNrZXI6IFwiTUFUSUNcIixcbiAgICAgIHRpY2tlck5hbWU6IFwiUG9seWdvblwiXG4gICAgfTtcbiAgfVxuXG4gIGlmIChjaGFpbklkID09PSA4MDAwMSkge1xuICAgIHJldHVybiB7XG4gICAgICBjaGFpbk5hbWVzcGFjZTogY2hhaW5OYW1lc3BhY2UsXG4gICAgICBjaGFpbklkOiBcIjB4MTM4ODFcIixcbiAgICAgIHJwY1RhcmdldDogXCJodHRwczovL3JwYy5hbmtyLmNvbS9wb2x5Z29uX211bWJhaVwiLFxuICAgICAgZGlzcGxheU5hbWU6IFwiUG9seWdvbiBNdW1iYWkgVGVzdG5ldFwiLFxuICAgICAgYmxvY2tFeHBsb3JlcjogXCJodHRwczovL211bWJhaS5wb2x5Z29uc2Nhbi5jb20vXCIsXG4gICAgICB0aWNrZXI6IFwiTUFUSUNcIixcbiAgICAgIHRpY2tlck5hbWU6IFwiUG9seWdvblwiXG4gICAgfTtcbiAgfVxuXG4gIGlmIChjaGFpbklkID09PSA1Nikge1xuICAgIHJldHVybiB7XG4gICAgICBjaGFpbk5hbWVzcGFjZTogY2hhaW5OYW1lc3BhY2UsXG4gICAgICBjaGFpbklkOiBcIjB4MzhcIixcbiAgICAgIHJwY1RhcmdldDogXCJodHRwczovL3JwYy5hbmtyLmNvbS9ic2NcIixcbiAgICAgIGRpc3BsYXlOYW1lOiBcIkJpbmFuY2UgU21hcnRDaGFpbiBNYWlubmV0XCIsXG4gICAgICBibG9ja0V4cGxvcmVyOiBcImh0dHBzOi8vYnNjc2Nhbi5jb21cIixcbiAgICAgIHRpY2tlcjogXCJCTkJcIixcbiAgICAgIHRpY2tlck5hbWU6IFwiQmluYW5jZSBTbWFydENoYWluXCJcbiAgICB9O1xuICB9XG5cbiAgaWYgKGNoYWluSWQgPT09IDk3KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYWluTmFtZXNwYWNlOiBjaGFpbk5hbWVzcGFjZSxcbiAgICAgIGNoYWluSWQ6IFwiMHg2MVwiLFxuICAgICAgcnBjVGFyZ2V0OiBcImh0dHBzOi8vcnBjLmFua3IuY29tL2JzY190ZXN0bmV0X2NoYXBlbFwiLFxuICAgICAgZGlzcGxheU5hbWU6IFwiQmluYW5jZSBTbWFydENoYWluIFRlc3RuZXRcIixcbiAgICAgIGJsb2NrRXhwbG9yZXI6IFwiaHR0cHM6Ly90ZXN0bmV0LmJzY3NjYW4uY29tXCIsXG4gICAgICB0aWNrZXI6IFwiQk5CXCIsXG4gICAgICB0aWNrZXJOYW1lOiBcIkJpbmFuY2UgU21hcnRDaGFpblwiXG4gICAgfTtcbiAgfVxuXG4gIGlmIChjaGFpbklkID09PSAyNSkge1xuICAgIHJldHVybiB7XG4gICAgICBjaGFpbk5hbWVzcGFjZTogY2hhaW5OYW1lc3BhY2UsXG4gICAgICBjaGFpbklkOiBcIjB4MTlcIixcbiAgICAgIHJwY1RhcmdldDogXCJodHRwczovL3JwYy5jcm9ub3Mub3JnXCIsXG4gICAgICBkaXNwbGF5TmFtZTogXCJDcm9ub3MgTWFpbm5ldFwiLFxuICAgICAgYmxvY2tFeHBsb3JlcjogXCJodHRwczovL2Nyb25vc2Nhbi5jb20vXCIsXG4gICAgICB0aWNrZXI6IFwiQ1JPXCIsXG4gICAgICB0aWNrZXJOYW1lOiBcIkNyb25vc1wiXG4gICAgfTtcbiAgfVxuXG4gIGlmIChjaGFpbklkID09PSAzMzgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhaW5OYW1lc3BhY2U6IGNoYWluTmFtZXNwYWNlLFxuICAgICAgY2hhaW5JZDogXCIweDE1MlwiLFxuICAgICAgcnBjVGFyZ2V0OiBcImh0dHBzOi8vcnBjLXQzLmNyb25vcy5vcmcvXCIsXG4gICAgICBkaXNwbGF5TmFtZTogXCJDcm9ub3MgVGVzdG5ldFwiLFxuICAgICAgYmxvY2tFeHBsb3JlcjogXCJodHRwczovL2Nyb25vc2Nhbi5jb20vXCIsXG4gICAgICB0aWNrZXI6IFwiQ1JPXCIsXG4gICAgICB0aWNrZXJOYW1lOiBcIkNyb25vc1wiXG4gICAgfTtcbiAgfVxuXG4gIGlmIChjaGFpbklkID09PSA4MjE3KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYWluTmFtZXNwYWNlOiBjaGFpbk5hbWVzcGFjZSxcbiAgICAgIGNoYWluSWQ6IFwiMHgyMDE5XCIsXG4gICAgICBycGNUYXJnZXQ6IFwiaHR0cHM6Ly9wdWJsaWMtbm9kZS1hcGkua2xheXRuYXBpLmNvbS92MS9jeXByZXNzXCIsXG4gICAgICBkaXNwbGF5TmFtZTogXCJLbGF5dG4gTWFpbm5ldFwiLFxuICAgICAgYmxvY2tFeHBsb3JlcjogXCJodHRwczovL3Njb3BlLmtsYXl0bi5jb21cIixcbiAgICAgIHRpY2tlcjogXCJLTEFZXCIsXG4gICAgICB0aWNrZXJOYW1lOiBcIktsYXl0blwiXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcbnZhciBnZXRTb2xhbmFDaGFpbkNvbmZpZyA9IGZ1bmN0aW9uIGdldFNvbGFuYUNoYWluQ29uZmlnKGNoYWluSWQpIHtcbiAgdmFyIGNoYWluTmFtZXNwYWNlID0gQ0hBSU5fTkFNRVNQQUNFUy5TT0xBTkE7XG5cbiAgaWYgKGNoYWluSWQgPT09IDEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhaW5OYW1lc3BhY2U6IGNoYWluTmFtZXNwYWNlLFxuICAgICAgY2hhaW5JZDogXCIweDFcIixcbiAgICAgIHJwY1RhcmdldDogXCJodHRwczovL3JwYy5hbmtyLmNvbS9zb2xhbmFcIixcbiAgICAgIGRpc3BsYXlOYW1lOiBcIlNvbGFuYSBNYWlubmV0XCIsXG4gICAgICBibG9ja0V4cGxvcmVyOiBcImh0dHBzOi8vZXhwbG9yZXIuc29sYW5hLmNvbVwiLFxuICAgICAgdGlja2VyOiBcIlNPTFwiLFxuICAgICAgdGlja2VyTmFtZTogXCJTb2xhbmFcIlxuICAgIH07XG4gIH0gZWxzZSBpZiAoY2hhaW5JZCA9PT0gMikge1xuICAgIHJldHVybiB7XG4gICAgICBjaGFpbk5hbWVzcGFjZTogY2hhaW5OYW1lc3BhY2UsXG4gICAgICBjaGFpbklkOiBcIjB4MlwiLFxuICAgICAgcnBjVGFyZ2V0OiBcImh0dHBzOi8vYXBpLnRlc3RuZXQuc29sYW5hLmNvbVwiLFxuICAgICAgZGlzcGxheU5hbWU6IFwiU29sYW5hIFRlc3RuZXRcIixcbiAgICAgIGJsb2NrRXhwbG9yZXI6IFwiaHR0cHM6Ly9leHBsb3Jlci5zb2xhbmEuY29tP2NsdXN0ZXI9dGVzdG5ldFwiLFxuICAgICAgdGlja2VyOiBcIlNPTFwiLFxuICAgICAgdGlja2VyTmFtZTogXCJTb2xhbmFcIlxuICAgIH07XG4gIH0gZWxzZSBpZiAoY2hhaW5JZCA9PT0gMykge1xuICAgIHJldHVybiB7XG4gICAgICBjaGFpbk5hbWVzcGFjZTogY2hhaW5OYW1lc3BhY2UsXG4gICAgICBjaGFpbklkOiBcIjB4M1wiLFxuICAgICAgcnBjVGFyZ2V0OiBcImh0dHBzOi8vYXBpLmRldm5ldC5zb2xhbmEuY29tXCIsXG4gICAgICBkaXNwbGF5TmFtZTogXCJTb2xhbmEgRGV2bmV0XCIsXG4gICAgICBibG9ja0V4cGxvcmVyOiBcImh0dHBzOi8vZXhwbG9yZXIuc29sYW5hLmNvbT9jbHVzdGVyPWRldm5ldFwiLFxuICAgICAgdGlja2VyOiBcIlNPTFwiLFxuICAgICAgdGlja2VyTmFtZTogXCJTb2xhbmFcIlxuICAgIH07XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG52YXIgZ2V0Q2hhaW5Db25maWcgPSBmdW5jdGlvbiBnZXRDaGFpbkNvbmZpZyhjaGFpbk5hbWVzcGFjZSwgY2hhaW5JZCkge1xuICBpZiAoY2hhaW5OYW1lc3BhY2UgPT09IENIQUlOX05BTUVTUEFDRVMuT1RIRVIpIHJldHVybiBudWxsO1xuICB2YXIgZmluYWxDaGFpbklkID0gY2hhaW5JZCA/IHR5cGVvZiBjaGFpbklkID09PSBcIm51bWJlclwiID8gY2hhaW5JZCA6IHBhcnNlSW50KGNoYWluSWQsIDE2KSA6IGdldERlZmF1bHROZXR3b3JrSWQoY2hhaW5OYW1lc3BhY2UpO1xuXG4gIGlmIChjaGFpbk5hbWVzcGFjZSA9PT0gQ0hBSU5fTkFNRVNQQUNFUy5FSVAxNTUpIHtcbiAgICByZXR1cm4gZ2V0RXZtQ2hhaW5Db25maWcoZmluYWxDaGFpbklkKTtcbiAgfSBlbHNlIGlmIChjaGFpbk5hbWVzcGFjZSA9PT0gQ0hBSU5fTkFNRVNQQUNFUy5TT0xBTkEpIHtcbiAgICByZXR1cm4gZ2V0U29sYW5hQ2hhaW5Db25maWcoZmluYWxDaGFpbklkKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyJDEoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkMSgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QkMSgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG52YXIgV2ViM0F1dGhFcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0N1c3RvbUVycm9yKSB7XG4gIF9pbmhlcml0cyhXZWIzQXV0aEVycm9yLCBfQ3VzdG9tRXJyb3IpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIkMShXZWIzQXV0aEVycm9yKTtcblxuICBmdW5jdGlvbiBXZWIzQXV0aEVycm9yKGNvZGUsIG1lc3NhZ2UpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV2ViM0F1dGhFcnJvcik7XG5cbiAgICAvLyB0YWtlcyBjYXJlIG9mIHN0YWNrIGFuZCBwcm90b1xuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiY29kZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcIm1lc3NhZ2VcIiwgdm9pZCAwKTtcblxuICAgIF90aGlzLmNvZGUgPSBjb2RlO1xuICAgIF90aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8IFwiXCI7IC8vIFNldCBuYW1lIGV4cGxpY2l0bHkgYXMgbWluaWZpY2F0aW9uIGNhbiBtYW5nbGUgY2xhc3MgbmFtZXNcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJuYW1lXCIsIHtcbiAgICAgIHZhbHVlOiBcIldlYjNBdXRoRXJyb3JcIlxuICAgIH0pO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhXZWIzQXV0aEVycm9yLCBbe1xuICAgIGtleTogXCJ0b0pTT05cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICBjb2RlOiB0aGlzLmNvZGUsXG4gICAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZVxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidG9TdHJpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b0pTT04oKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFdlYjNBdXRoRXJyb3I7XG59KEN1c3RvbUVycm9yKTtcbnZhciBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfV2ViM0F1dGhFcnJvcikge1xuICBfaW5oZXJpdHMoV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvciwgX1dlYjNBdXRoRXJyb3IpO1xuXG4gIHZhciBfc3VwZXIyID0gX2NyZWF0ZVN1cGVyJDEoV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvcik7XG5cbiAgZnVuY3Rpb24gV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvcihjb2RlLCBtZXNzYWdlKSB7XG4gICAgdmFyIF90aGlzMjtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yKTtcblxuICAgIC8vIHRha2VzIGNhcmUgb2Ygc3RhY2sgYW5kIHByb3RvXG4gICAgX3RoaXMyID0gX3N1cGVyMi5jYWxsKHRoaXMsIGNvZGUsIG1lc3NhZ2UpOyAvLyBTZXQgbmFtZSBleHBsaWNpdGx5IGFzIG1pbmlmaWNhdGlvbiBjYW4gbWFuZ2xlIGNsYXNzIG5hbWVzXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczIpLCBcIm5hbWVcIiwge1xuICAgICAgdmFsdWU6IFwiV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvclwiXG4gICAgfSk7XG4gICAgcmV0dXJuIF90aGlzMjtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLCBudWxsLCBbe1xuICAgIGtleTogXCJmcm9tQ29kZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmcm9tQ29kZShjb2RlKSB7XG4gICAgICB2YXIgZXh0cmFNZXNzYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBcIlwiO1xuICAgICAgcmV0dXJuIG5ldyBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yKGNvZGUsIFwiXCIuY29uY2F0KFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IubWVzc2FnZXNbY29kZV0sIFwiLCBcIikuY29uY2F0KGV4dHJhTWVzc2FnZSkpO1xuICAgIH0gLy8gQ3VzdG9tIG1ldGhvZHNcblxuICB9LCB7XG4gICAga2V5OiBcIm5vdEZvdW5kXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG5vdEZvdW5kKCkge1xuICAgICAgdmFyIGV4dHJhTWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogXCJcIjtcbiAgICAgIHJldHVybiBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLmZyb21Db2RlKDUwMDEsIGV4dHJhTWVzc2FnZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm5vdEluc3RhbGxlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBub3RJbnN0YWxsZWQoKSB7XG4gICAgICB2YXIgZXh0cmFNZXNzYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBcIlwiO1xuICAgICAgcmV0dXJuIFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IuZnJvbUNvZGUoNTAwMiwgZXh0cmFNZXNzYWdlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibm90UmVhZHlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbm90UmVhZHkoKSB7XG4gICAgICB2YXIgZXh0cmFNZXNzYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBcIlwiO1xuICAgICAgcmV0dXJuIFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IuZnJvbUNvZGUoNTAwMywgZXh0cmFNZXNzYWdlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwid2luZG93QmxvY2tlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB3aW5kb3dCbG9ja2VkKCkge1xuICAgICAgdmFyIGV4dHJhTWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogXCJcIjtcbiAgICAgIHJldHVybiBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLmZyb21Db2RlKDUwMDQsIGV4dHJhTWVzc2FnZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndpbmRvd0Nsb3NlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB3aW5kb3dDbG9zZWQoKSB7XG4gICAgICB2YXIgZXh0cmFNZXNzYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBcIlwiO1xuICAgICAgcmV0dXJuIFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IuZnJvbUNvZGUoNTAwNSwgZXh0cmFNZXNzYWdlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5jb21wYXRpYmxlQ2hhaW5OYW1lU3BhY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5jb21wYXRpYmxlQ2hhaW5OYW1lU3BhY2UoKSB7XG4gICAgICB2YXIgZXh0cmFNZXNzYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBcIlwiO1xuICAgICAgcmV0dXJuIFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IuZnJvbUNvZGUoNTAwNiwgZXh0cmFNZXNzYWdlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZHVwbGljYXRlQWRhcHRlckVycm9yXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGR1cGxpY2F0ZUFkYXB0ZXJFcnJvcigpIHtcbiAgICAgIHZhciBleHRyYU1lc3NhZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFwiXCI7XG4gICAgICByZXR1cm4gV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5mcm9tQ29kZSg1MDA3LCBleHRyYU1lc3NhZ2UpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbnZhbGlkUHJvdmlkZXJDb25maWdFcnJvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbnZhbGlkUHJvdmlkZXJDb25maWdFcnJvcigpIHtcbiAgICAgIHZhciBleHRyYU1lc3NhZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFwiXCI7XG4gICAgICByZXR1cm4gV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5mcm9tQ29kZSg1MDA4LCBleHRyYU1lc3NhZ2UpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwcm92aWRlck5vdFJlYWR5RXJyb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvdmlkZXJOb3RSZWFkeUVycm9yKCkge1xuICAgICAgdmFyIGV4dHJhTWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogXCJcIjtcbiAgICAgIHJldHVybiBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLmZyb21Db2RlKDUwMDksIGV4dHJhTWVzc2FnZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJwY0Nvbm5lY3Rpb25FcnJvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBycGNDb25uZWN0aW9uRXJyb3IoKSB7XG4gICAgICB2YXIgZXh0cmFNZXNzYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBcIlwiO1xuICAgICAgcmV0dXJuIFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IuZnJvbUNvZGUoNTAxMCwgZXh0cmFNZXNzYWdlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW52YWxpZFBhcmFtc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbnZhbGlkUGFyYW1zKCkge1xuICAgICAgdmFyIGV4dHJhTWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogXCJcIjtcbiAgICAgIHJldHVybiBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLmZyb21Db2RlKDUwMTEsIGV4dHJhTWVzc2FnZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImludmFsaWROZXR3b3JrXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGludmFsaWROZXR3b3JrKCkge1xuICAgICAgdmFyIGV4dHJhTWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogXCJcIjtcbiAgICAgIHJldHVybiBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLmZyb21Db2RlKDUwMTMsIGV4dHJhTWVzc2FnZSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3I7XG59KFdlYjNBdXRoRXJyb3IpO1xuLyoqXG4gKiB3YWxsZXQgbG9naW4gZXJyb3JzXG4gKi9cblxuX2RlZmluZVByb3BlcnR5KFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IsIFwibWVzc2FnZXNcIiwge1xuICA1MDAwOiBcIkN1c3RvbVwiLFxuICA1MDAxOiBcIldhbGxldCBpcyBub3QgZm91bmRcIixcbiAgNTAwMjogXCJXYWxsZXQgaXMgbm90IGluc3RhbGxlZFwiLFxuICA1MDAzOiBcIldhbGxldCBpcyBub3QgcmVhZHkgeWV0XCIsXG4gIDUwMDQ6IFwiV2FsbGV0IHdpbmRvdyBpcyBibG9ja2VkXCIsXG4gIDUwMDU6IFwiV2FsbGV0IHdpbmRvdyBoYXMgYmVlbiBjbG9zZWQgYnkgdGhlIHVzZXJcIixcbiAgNTAwNjogXCJJbmNvbXBhdGlibGUgY2hhaW4gbmFtZXNwYWNlIHByb3ZpZGVkXCIsXG4gIDUwMDc6IFwiQWRhcHRlciBoYXMgYWxyZWFkeSBiZWVuIGluY2x1ZGVkXCIsXG4gIDUwMDg6IFwiSW52YWxpZCBwcm92aWRlciBDb25maWdcIixcbiAgNTAwOTogXCJQcm92aWRlciBpcyBub3QgcmVhZHkgeWV0XCIsXG4gIDUwMTA6IFwiRmFpbGVkIHRvIGNvbm5lY3Qgd2l0aCBycGMgdXJsXCIsXG4gIDUwMTE6IFwiSW52YWxpZCBwYXJhbXMgcGFzc2VkIGluXCIsXG4gIDUwMTM6IFwiSW52YWxpZCBuZXR3b3JrIHByb3ZpZGVkXCJcbn0pO1xuXG52YXIgV2FsbGV0TG9naW5FcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1dlYjNBdXRoRXJyb3IyKSB7XG4gIF9pbmhlcml0cyhXYWxsZXRMb2dpbkVycm9yLCBfV2ViM0F1dGhFcnJvcjIpO1xuXG4gIHZhciBfc3VwZXIzID0gX2NyZWF0ZVN1cGVyJDEoV2FsbGV0TG9naW5FcnJvcik7XG5cbiAgZnVuY3Rpb24gV2FsbGV0TG9naW5FcnJvcihjb2RlLCBtZXNzYWdlKSB7XG4gICAgdmFyIF90aGlzMztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXYWxsZXRMb2dpbkVycm9yKTtcblxuICAgIC8vIHRha2VzIGNhcmUgb2Ygc3RhY2sgYW5kIHByb3RvXG4gICAgX3RoaXMzID0gX3N1cGVyMy5jYWxsKHRoaXMsIGNvZGUsIG1lc3NhZ2UpOyAvLyBTZXQgbmFtZSBleHBsaWNpdGx5IGFzIG1pbmlmaWNhdGlvbiBjYW4gbWFuZ2xlIGNsYXNzIG5hbWVzXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczMpLCBcIm5hbWVcIiwge1xuICAgICAgdmFsdWU6IFwiV2FsbGV0TG9naW5FcnJvclwiXG4gICAgfSk7XG4gICAgcmV0dXJuIF90aGlzMztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhXYWxsZXRMb2dpbkVycm9yLCBudWxsLCBbe1xuICAgIGtleTogXCJmcm9tQ29kZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmcm9tQ29kZShjb2RlKSB7XG4gICAgICB2YXIgZXh0cmFNZXNzYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBcIlwiO1xuICAgICAgcmV0dXJuIG5ldyBXYWxsZXRMb2dpbkVycm9yKGNvZGUsIFwiXCIuY29uY2F0KFdhbGxldExvZ2luRXJyb3IubWVzc2FnZXNbY29kZV0pLmNvbmNhdChleHRyYU1lc3NhZ2UpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29ubmVjdGlvbkVycm9yXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3Rpb25FcnJvcigpIHtcbiAgICAgIHZhciBleHRyYU1lc3NhZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFwiXCI7XG4gICAgICByZXR1cm4gV2FsbGV0TG9naW5FcnJvci5mcm9tQ29kZSg1MTExLCBleHRyYU1lc3NhZ2UpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJkaXNjb25uZWN0aW9uRXJyb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY29ubmVjdGlvbkVycm9yKCkge1xuICAgICAgdmFyIGV4dHJhTWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogXCJcIjtcbiAgICAgIHJldHVybiBXYWxsZXRMb2dpbkVycm9yLmZyb21Db2RlKDUxMTIsIGV4dHJhTWVzc2FnZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm5vdENvbm5lY3RlZEVycm9yXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG5vdENvbm5lY3RlZEVycm9yKCkge1xuICAgICAgdmFyIGV4dHJhTWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogXCJcIjtcbiAgICAgIHJldHVybiBXYWxsZXRMb2dpbkVycm9yLmZyb21Db2RlKDUxMTMsIGV4dHJhTWVzc2FnZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInBvcHVwQ2xvc2VkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBvcHVwQ2xvc2VkKCkge1xuICAgICAgdmFyIGV4dHJhTWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogXCJcIjtcbiAgICAgIHJldHVybiBXYWxsZXRMb2dpbkVycm9yLmZyb21Db2RlKDUxMTQsIGV4dHJhTWVzc2FnZSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFdhbGxldExvZ2luRXJyb3I7XG59KFdlYjNBdXRoRXJyb3IpO1xuXG5fZGVmaW5lUHJvcGVydHkoV2FsbGV0TG9naW5FcnJvciwgXCJtZXNzYWdlc1wiLCB7XG4gIDUwMDA6IFwiQ3VzdG9tXCIsXG4gIDUxMTE6IFwiRmFpbGVkIHRvIGNvbm5lY3Qgd2l0aCB3YWxsZXRcIixcbiAgNTExMjogXCJGYWlsZWQgdG8gZGlzY29ubmVjdCBmcm9tIHdhbGxldFwiLFxuICA1MTEzOiBcIldhbGxldCBpcyBub3QgY29ubmVjdGVkXCIsXG4gIDUxMTQ6IFwiV2FsbGV0IHBvcHVwIGhhcyBiZWVuIGNsb3NlZCBieSB0aGUgdXNlclwiXG59KTtcblxuZnVuY3Rpb24gb3duS2V5cyQxKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkJDEodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMkMShPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzJDEoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfVxuXG52YXIgTVVMVElfQ0hBSU5fQURBUFRFUlMgPSB7XG4gIE9QRU5MT0dJTjogXCJvcGVubG9naW5cIixcbiAgV0FMTEVUX0NPTk5FQ1RfVjE6IFwid2FsbGV0LWNvbm5lY3QtdjFcIixcbiAgV0FMTEVUX0NPTk5FQ1RfVjI6IFwid2FsbGV0LWNvbm5lY3QtdjJcIlxufTtcbnZhciBTT0xBTkFfQURBUFRFUlMgPSBfb2JqZWN0U3ByZWFkJDEoe1xuICBUT1JVU19TT0xBTkE6IFwidG9ydXMtc29sYW5hXCIsXG4gIFBIQU5UT006IFwicGhhbnRvbVwiLFxuICBTT0xMRVQ6IFwic29sbGV0XCIsXG4gIFNPTExFVF9FWFRFTlNJT046IFwic29sbGV0LWV4dGVuc2lvblwiLFxuICBTT0xGTEFSRTogXCJzb2xmbGFyZVwiLFxuICBTTE9QRTogXCJzbG9wZVwiXG59LCBNVUxUSV9DSEFJTl9BREFQVEVSUyk7XG52YXIgRVZNX0FEQVBURVJTID0gX29iamVjdFNwcmVhZCQxKHtcbiAgVE9SVVNfRVZNOiBcInRvcnVzLWV2bVwiLFxuICBNRVRBTUFTSzogXCJtZXRhbWFza1wiLFxuICBDT0lOQkFTRTogXCJjb2luYmFzZVwiXG59LCBNVUxUSV9DSEFJTl9BREFQVEVSUyk7XG52YXIgV0FMTEVUX0FEQVBURVJTID0gX29iamVjdFNwcmVhZCQxKF9vYmplY3RTcHJlYWQkMSh7fSwgRVZNX0FEQVBURVJTKSwgU09MQU5BX0FEQVBURVJTKTtcblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9XG52YXIgQURBUFRFUl9DQVRFR09SWSA9IHtcbiAgRVhURVJOQUw6IFwiZXh0ZXJuYWxcIixcbiAgSU5fQVBQOiBcImluX2FwcFwiXG59O1xudmFyIEFEQVBURVJfU1RBVFVTID0ge1xuICBOT1RfUkVBRFk6IFwibm90X3JlYWR5XCIsXG4gIFJFQURZOiBcInJlYWR5XCIsXG4gIENPTk5FQ1RJTkc6IFwiY29ubmVjdGluZ1wiLFxuICBDT05ORUNURUQ6IFwiY29ubmVjdGVkXCIsXG4gIERJU0NPTk5FQ1RFRDogXCJkaXNjb25uZWN0ZWRcIixcbiAgRVJST1JFRDogXCJlcnJvcmVkXCJcbn07XG52YXIgQURBUFRFUl9FVkVOVFMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIEFEQVBURVJfU1RBVFVTKSwge30sIHtcbiAgQURBUFRFUl9EQVRBX1VQREFURUQ6IFwiYWRhcHRlcl9kYXRhX3VwZGF0ZWRcIlxufSk7XG52YXIgQmFzZUFkYXB0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9TYWZlRXZlbnRFbWl0dGVyKSB7XG4gIF9pbmhlcml0cyhCYXNlQWRhcHRlciwgX1NhZmVFdmVudEVtaXR0ZXIpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoQmFzZUFkYXB0ZXIpO1xuXG4gIGZ1bmN0aW9uIEJhc2VBZGFwdGVyKCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYXNlQWRhcHRlcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbC5hcHBseShfc3VwZXIsIFt0aGlzXS5jb25jYXQoYXJncykpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImFkYXB0ZXJEYXRhXCIsIHt9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJzZXNzaW9uVGltZVwiLCA4NjQwMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiY2hhaW5Db25maWdcIiwgbnVsbCk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQmFzZUFkYXB0ZXIsIFt7XG4gICAga2V5OiBcImNoYWluQ29uZmlnUHJveHlcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoYWluQ29uZmlnID8gX29iamVjdFNwcmVhZCh7fSwgdGhpcy5jaGFpbkNvbmZpZykgOiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXRDaGFpbkNvbmZpZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDaGFpbkNvbmZpZyhjdXN0b21DaGFpbkNvbmZpZykge1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBBREFQVEVSX1NUQVRVUy5SRUFEWSkgcmV0dXJuO1xuICAgICAgaWYgKCFjdXN0b21DaGFpbkNvbmZpZy5jaGFpbk5hbWVzcGFjZSkgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5ub3RSZWFkeShcIkNoYWluTmFtZXNwYWNlIGlzIHJlcXVpcmVkIHdoaWxlIHNldHRpbmcgY2hhaW5Db25maWdcIik7XG4gICAgICB2YXIgZGVmYXVsdENoYWluQ29uZmlnID0gZ2V0Q2hhaW5Db25maWcoY3VzdG9tQ2hhaW5Db25maWcuY2hhaW5OYW1lc3BhY2UsIGN1c3RvbUNoYWluQ29uZmlnLmNoYWluSWQpO1xuICAgICAgdGhpcy5jaGFpbkNvbmZpZyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdENoYWluQ29uZmlnKSwgY3VzdG9tQ2hhaW5Db25maWcpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXRBZGFwdGVyU2V0dGluZ3NcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QWRhcHRlclNldHRpbmdzKF8pIHt9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2hlY2tDb25uZWN0aW9uUmVxdWlyZW1lbnRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrQ29ubmVjdGlvblJlcXVpcmVtZW50cygpIHtcbiAgICAgIC8vIHdlIHJlY29ubmVjdCB3aXRob3V0IGtpbGxpbmcgZXhpc3Rpbmcgd2FsbGV0IGNvbm5lY3Qgc2Vzc2lvbiBvbiBjYWxsaW5nIGNvbm5lY3QgYWdhaW4uXG4gICAgICBpZiAodGhpcy5uYW1lID09PSBXQUxMRVRfQURBUFRFUlMuV0FMTEVUX0NPTk5FQ1RfVjEgJiYgdGhpcy5zdGF0dXMgPT09IEFEQVBURVJfU1RBVFVTLkNPTk5FQ1RJTkcpIHJldHVybjtlbHNlIGlmICh0aGlzLnN0YXR1cyA9PT0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVElORykgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5ub3RSZWFkeShcIkFscmVhZHkgY29ubmVjdGluZ1wiKTtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVEVEKSB0aHJvdyBXYWxsZXRMb2dpbkVycm9yLmNvbm5lY3Rpb25FcnJvcihcIkFscmVhZHkgY29ubmVjdGVkXCIpO1xuICAgICAgaWYgKHRoaXMuc3RhdHVzICE9PSBBREFQVEVSX1NUQVRVUy5SRUFEWSkgdGhyb3cgV2FsbGV0TG9naW5FcnJvci5jb25uZWN0aW9uRXJyb3IoXCJXYWxsZXQgYWRhcHRlciBpcyBub3QgcmVhZHkgeWV0LCBQbGVhc2Ugd2FpdCBmb3IgaW5pdCBmdW5jdGlvbiB0byByZXNvbHZlIGJlZm9yZSBjYWxsaW5nIGNvbm5lY3QvY29ubmVjdFRvIGZ1bmN0aW9uXCIpO1xuICAgICAgaWYgKCF0aGlzLmNsaWVudElkKSB0aHJvdyBXYWxsZXRMb2dpbkVycm9yLmNvbm5lY3Rpb25FcnJvcihcIlBsZWFzZSBpbml0aWFsaXplIFdlYjNBdXRoIHdpdGggYSB2YWxpZCBjbGllbnRJZCBpbiBjb25zdHJ1Y3RvclwiKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2hlY2tJbml0aWFsaXphdGlvblJlcXVpcmVtZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0luaXRpYWxpemF0aW9uUmVxdWlyZW1lbnRzKCkge1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBBREFQVEVSX1NUQVRVUy5OT1RfUkVBRFkpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVEVEKSB0aHJvdyBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLm5vdFJlYWR5KFwiQWxyZWFkeSBjb25uZWN0ZWRcIik7XG4gICAgICBpZiAodGhpcy5zdGF0dXMgPT09IEFEQVBURVJfU1RBVFVTLlJFQURZKSB0aHJvdyBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLm5vdFJlYWR5KFwiQWRhcHRlciBpcyBhbHJlYWR5IGluaXRpYWxpemVkXCIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVBZGFwdGVyRGF0YVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVBZGFwdGVyRGF0YShkYXRhKSB7XG4gICAgICB0aGlzLmFkYXB0ZXJEYXRhID0gZGF0YTtcbiAgICAgIHRoaXMuZW1pdChBREFQVEVSX0VWRU5UUy5BREFQVEVSX0RBVEFfVVBEQVRFRCwge1xuICAgICAgICBhZGFwdGVyTmFtZTogdGhpcy5uYW1lLFxuICAgICAgICBkYXRhOiBkYXRhXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQmFzZUFkYXB0ZXI7XG59KFNhZmVFdmVudEVtaXR0ZXIpO1xudmFyIEJhc2VOZXR3b3JrU3dpdGNoID0gLyojX19QVVJFX18qL19jcmVhdGVDbGFzcyhmdW5jdGlvbiBCYXNlTmV0d29ya1N3aXRjaCgpIHtcbiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJhc2VOZXR3b3JrU3dpdGNoKTtcbn0pO1xuXG52YXIgYXV0aFNlcnZlciA9IFwiaHR0cHM6Ly9hdXRoanMud2ViM2F1dGguaW9cIjtcblxudmFyIGxvZyA9IGxvZ2xldmVsLmdldExvZ2dlcihcIndlYjNhdXRoLWxvZ2dlclwiKTtcblxuZnVuY3Rpb24gc3RvcmFnZUF2YWlsYWJsZSh0eXBlKSB7XG4gIHZhciBzdG9yYWdlRXhpc3RzID0gZmFsc2U7XG4gIHZhciBzdG9yYWdlTGVuZ3RoID0gMDtcbiAgdmFyIHN0b3JhZ2U7XG5cbiAgdHJ5IHtcbiAgICBzdG9yYWdlID0gd2luZG93W3R5cGVdO1xuICAgIHN0b3JhZ2VFeGlzdHMgPSB0cnVlO1xuICAgIHN0b3JhZ2VMZW5ndGggPSBzdG9yYWdlLmxlbmd0aDtcbiAgICB2YXIgeCA9IFwiX19zdG9yYWdlX3Rlc3RfX1wiO1xuICAgIHN0b3JhZ2Uuc2V0SXRlbSh4LCB4KTtcbiAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdmFyIF9lcnJvciA9IGVycm9yO1xuICAgIHJldHVybiAhIShfZXJyb3IgJiYgKCAvLyBldmVyeXRoaW5nIGV4Y2VwdCBGaXJlZm94XG4gICAgX2Vycm9yLmNvZGUgPT09IDIyIHx8IC8vIEZpcmVmb3hcbiAgICBfZXJyb3IuY29kZSA9PT0gMTAxNCB8fCAvLyB0ZXN0IG5hbWUgZmllbGQgdG9vLCBiZWNhdXNlIGNvZGUgbWlnaHQgbm90IGJlIHByZXNlbnRcbiAgICAvLyBldmVyeXRoaW5nIGV4Y2VwdCBGaXJlZm94XG4gICAgX2Vycm9yLm5hbWUgPT09IFwiUXVvdGFFeGNlZWRlZEVycm9yXCIgfHwgLy8gRmlyZWZveFxuICAgIF9lcnJvci5uYW1lID09PSBcIk5TX0VSUk9SX0RPTV9RVU9UQV9SRUFDSEVEXCIpICYmIC8vIGFja25vd2xlZGdlIFF1b3RhRXhjZWVkZWRFcnJvciBvbmx5IGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGFscmVhZHkgc3RvcmVkXG4gICAgc3RvcmFnZUV4aXN0cyAmJiBzdG9yYWdlTGVuZ3RoICE9PSAwKTtcbiAgfVxufVxudmFyIGlzSGV4U3RyaWN0ID0gZnVuY3Rpb24gaXNIZXhTdHJpY3QoaGV4KSB7XG4gIHJldHVybiAodHlwZW9mIGhleCA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgaGV4ID09PSBcIm51bWJlclwiKSAmJiAvXigtKT8weFswLTlhLWZdKiQvaS50ZXN0KGhleCk7XG59O1xuXG52YXIgY2hlY2tJZlRva2VuSXNFeHBpcmVkID0gZnVuY3Rpb24gY2hlY2tJZlRva2VuSXNFeHBpcmVkKHRva2VuKSB7XG4gIHZhciBkZWNvZGVkID0gSnd0RGVjb2RlKHRva2VuKTtcblxuICBpZiAoIWRlY29kZWQuZXhwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAoZGVjb2RlZC5leHAgPCBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcbnZhciBzaWduQ2hhbGxlbmdlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHBheWxvYWQsIGNoYWluTmFtZXNwYWNlKSB7XG4gICAgdmFyIHQsIGhlYWRlciwgbmV0d29yaywgZGF0YSwgcmVzO1xuICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICB0ID0gY2hhaW5OYW1lc3BhY2UgPT09IFwic29sYW5hXCIgPyBcInNpcDk5XCIgOiBcImVpcDE5MVwiO1xuICAgICAgICAgICAgaGVhZGVyID0ge1xuICAgICAgICAgICAgICB0OiB0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbmV0d29yayA9IGNoYWluTmFtZXNwYWNlID09PSBcInNvbGFuYVwiID8gXCJzb2xhbmFcIiA6IFwiZXRoZXJldW1cIjtcbiAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgICAgICAgICAgIGhlYWRlcjogaGVhZGVyLFxuICAgICAgICAgICAgICBuZXR3b3JrOiBuZXR3b3JrXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7XG4gICAgICAgICAgICByZXR1cm4gcG9zdChcIlwiLmNvbmNhdChhdXRoU2VydmVyLCBcIi9zaXd3L2dldFwiKSwgZGF0YSk7XG5cbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50O1xuXG4gICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gYXV0aGVudGljYXRlIHVzZXIsIFBsZWFzZSByZWFjaCBvdXQgdG8gV2ViM0F1dGggU3VwcG9ydCB0ZWFtXCIpO1xuXG4gICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCByZXMuY2hhbGxlbmdlKTtcblxuICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIF9jYWxsZWUpO1xuICB9KSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHNpZ25DaGFsbGVuZ2UoX3gsIF94Mikge1xuICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59KCk7XG52YXIgdmVyaWZ5U2lnbmVkQ2hhbGxlbmdlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoY2hhaW5OYW1lc3BhY2UsIHNpZ25lZE1lc3NhZ2UsIGNoYWxsZW5nZSwgaXNzdWVyLCBzZXNzaW9uVGltZSwgY2xpZW50SWQpIHtcbiAgICB2YXIgdCwgc2lnRGF0YSwgaWRUb2tlblJlcztcbiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcbiAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHQgPSBjaGFpbk5hbWVzcGFjZSA9PT0gXCJzb2xhbmFcIiA/IFwic2lwOTlcIiA6IFwiZWlwMTkxXCI7XG4gICAgICAgICAgICBzaWdEYXRhID0ge1xuICAgICAgICAgICAgICBzaWduYXR1cmU6IHtcbiAgICAgICAgICAgICAgICBzOiBzaWduZWRNZXNzYWdlLFxuICAgICAgICAgICAgICAgIHQ6IHRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogY2hhbGxlbmdlLFxuICAgICAgICAgICAgICBpc3N1ZXI6IGlzc3VlcixcbiAgICAgICAgICAgICAgYXVkaWVuY2U6IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSxcbiAgICAgICAgICAgICAgdGltZW91dDogc2Vzc2lvblRpbWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7XG4gICAgICAgICAgICByZXR1cm4gcG9zdChcIlwiLmNvbmNhdChhdXRoU2VydmVyLCBcIi9zaXd3L3ZlcmlmeVwiKSwgc2lnRGF0YSwge1xuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgY2xpZW50X2lkOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICB3YWxsZXRfcHJvdmlkZXI6IGlzc3VlclxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGlkVG9rZW5SZXMgPSBfY29udGV4dDIuc2VudDtcblxuICAgICAgICAgICAgaWYgKGlkVG9rZW5SZXMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsb2cuZXJyb3IoXCJGYWlsZWQgdG8gYXV0aGVudGljYXRlIHVzZXIsICxtZXNzYWdlIHZlcmlmaWNhdGlvbiBmYWlsZWRcIiwgaWRUb2tlblJlcy5lcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gYXV0aGVudGljYXRlIHVzZXIsICxtZXNzYWdlIHZlcmlmaWNhdGlvbiBmYWlsZWRcIik7XG5cbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdChcInJldHVyblwiLCBpZFRva2VuUmVzLnRva2VuKTtcblxuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIF9jYWxsZWUyKTtcbiAgfSkpO1xuXG4gIHJldHVybiBmdW5jdGlvbiB2ZXJpZnlTaWduZWRDaGFsbGVuZ2UoX3gzLCBfeDQsIF94NSwgX3g2LCBfeDcsIF94OCkge1xuICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufSgpO1xudmFyIGdldFNhdmVkVG9rZW4gPSBmdW5jdGlvbiBnZXRTYXZlZFRva2VuKHVzZXJBZGRyZXNzLCBpc3N1ZXIpIHtcbiAgaWYgKHN0b3JhZ2VBdmFpbGFibGUoXCJsb2NhbFN0b3JhZ2VcIikpIHtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJcIi5jb25jYXQodXNlckFkZHJlc3MudG9Mb3dlckNhc2UoKSwgXCJfXCIpLmNvbmNhdChpc3N1ZXIpKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcbnZhciBzYXZlVG9rZW4gPSBmdW5jdGlvbiBzYXZlVG9rZW4odXNlckFkZHJlc3MsIGlzc3VlciwgdG9rZW4pIHtcbiAgaWYgKHN0b3JhZ2VBdmFpbGFibGUoXCJsb2NhbFN0b3JhZ2VcIikpIHtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJcIi5jb25jYXQodXNlckFkZHJlc3MudG9Mb3dlckNhc2UoKSwgXCJfXCIpLmNvbmNhdChpc3N1ZXIpLCB0b2tlbik7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG52YXIgY2xlYXJUb2tlbiA9IGZ1bmN0aW9uIGNsZWFyVG9rZW4odXNlckFkZHJlc3MsIGlzc3Vlcikge1xuICBpZiAoc3RvcmFnZUF2YWlsYWJsZShcImxvY2FsU3RvcmFnZVwiKSkge1xuICAgIHJldHVybiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcIlwiLmNvbmNhdCh1c2VyQWRkcmVzcy50b0xvd2VyQ2FzZSgpLCBcIl9cIikuY29uY2F0KGlzc3VlcikpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59O1xuXG52YXIgUFJPVklERVJfRVZFTlRTID0ge1xuICBJTklUSUFMSVpFRDogXCJpbml0aWFsaXplZFwiLFxuICBFUlJPUkVEOiBcImVycm9yZWRcIlxufTtcblxuZXhwb3J0IHsgQURBUFRFUl9DQVRFR09SWSwgQURBUFRFUl9FVkVOVFMsIEFEQVBURVJfTkFNRVNQQUNFUywgQURBUFRFUl9TVEFUVVMsIEJhc2VBZGFwdGVyLCBCYXNlTmV0d29ya1N3aXRjaCwgQ0hBSU5fTkFNRVNQQUNFUywgRVZNX0FEQVBURVJTLCBNVUxUSV9DSEFJTl9BREFQVEVSUywgUFJPVklERVJfRVZFTlRTLCBTT0xBTkFfQURBUFRFUlMsIFdBTExFVF9BREFQVEVSUywgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvciwgV2FsbGV0TG9naW5FcnJvciwgV2ViM0F1dGhFcnJvciwgYXV0aFNlcnZlciwgY2hlY2tJZlRva2VuSXNFeHBpcmVkLCBjbGVhclRva2VuLCBnZXRDaGFpbkNvbmZpZywgZ2V0RXZtQ2hhaW5Db25maWcsIGdldFNhdmVkVG9rZW4sIGdldFNvbGFuYUNoYWluQ29uZmlnLCBpc0hleFN0cmljdCwgbG9nLCBzYXZlVG9rZW4sIHNpZ25DaGFsbGVuZ2UsIHN0b3JhZ2VBdmFpbGFibGUsIHZlcmlmeVNpZ25lZENoYWxsZW5nZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5lc20uanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@web3auth/metamask-adapter/node_modules/@web3auth/base/dist/base.esm.js\n"));

/***/ })

}]);